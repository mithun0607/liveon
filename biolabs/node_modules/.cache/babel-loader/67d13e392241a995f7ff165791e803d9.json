{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend, remove } from '@syncfusion/ej2-base';\nimport { createElement, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */function (_super) {\n  __extends(Agenda, _super);\n  function Agenda(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.viewClass = 'e-agenda-view';\n    _this.isInverseTableSelect = false;\n    _this.agendaDates = {};\n    _this.virtualScrollTop = 1;\n    return _this;\n  }\n  Agenda.prototype.getModuleName = function () {\n    return 'agenda';\n  };\n  Agenda.prototype.renderLayout = function () {\n    this.agendaDates = {};\n    this.element = createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    });\n    addClass([this.element], this.viewClass);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n    var eTr = createElement('tr');\n    this.element.querySelector('tbody').appendChild(eTr);\n    var workTd = createElement('td');\n    eTr.appendChild(workTd);\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    workTd.appendChild(wrap);\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    wrap.appendChild(tbl);\n    var tBody = tbl.querySelector('tbody');\n    var agendaDate = util.resetTime(this.parent.selectedDate);\n    this.renderEmptyContent(tBody, agendaDate);\n    this.wireEvents();\n    if (this.parent.resourceBase) {\n      this.parent.resourceBase.generateResourceLevels([{\n        renderDates: this.parent.activeView.renderDates\n      }]);\n    }\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n    this.parent.notify(event.contentReady, {});\n  };\n  Agenda.prototype.eventLoad = function (args) {\n    this.dataSource = extend([], this.parent.eventsData, null, true);\n    for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n      var event_1 = _a[_i];\n      delete event_1.generatedDates;\n    }\n    var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ? args.processedData : this.parent.eventsProcessed;\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n      eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n    }\n    this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n    var agendaDate = util.resetTime(this.parent.selectedDate);\n    var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    util.removeChildren(tBody);\n    this.renderInitialContent(tBody, agendaDate);\n    this.wireEventActions();\n    var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n    contentArea.scrollTop = 1;\n    this.parent.notify(event.eventsLoaded, {});\n    if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.retainScrollPosition();\n    }\n  };\n  Agenda.prototype.refreshEvent = function (refreshDate) {\n    var processedData = [];\n    var fields = this.parent.eventFields;\n    for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n      var data = _a[_i];\n      if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) && !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n        processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n      }\n    }\n    this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n  };\n  Agenda.prototype.refreshHeader = function () {\n    var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    if (this.parent.activeViewOptions.group.byDate) {\n      util.removeChildren(tBody);\n    } else {\n      remove(tBody.firstElementChild);\n    }\n    var agendaDate = util.resetTime(this.parent.selectedDate);\n    var emptyTBody = createElement('tbody');\n    var firstDate = new Date(agendaDate.getTime());\n    var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n    this.renderContent(emptyTBody, firstDate, lastDate);\n    append([].slice.call(emptyTBody.childNodes), tBody);\n  };\n  Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n    var emptyTBody = createElement('tbody');\n    var firstDate = new Date(agendaDate.getTime());\n    var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n    this.renderContent(emptyTBody, firstDate, lastDate);\n    append([].slice.call(emptyTBody.childNodes), tBody);\n    // Initial rendering, to load previous date events upto scroll bar enable\n    if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n      var contentArea = this.getContentAreaElement();\n      var contentChild = contentArea.querySelector('.e-content-table');\n      while (contentArea.offsetWidth <= contentArea.clientWidth) {\n        if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n          break;\n        }\n        var emptyTBody_1 = createElement('tbody');\n        lastDate = firstDate;\n        firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody_1, firstDate, lastDate);\n        prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n        if (firstDate <= this.parent.minDate) {\n          break;\n        }\n      }\n    }\n    if (tBody.childNodes.length <= 0) {\n      this.renderEmptyContent(tBody, agendaDate);\n    }\n  };\n  Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n    var fieldMapping = this.parent.eventFields;\n    var firstDate = new Date(agendaDate.getTime());\n    var isObject = this.appointmentFiltering(firstDate, lastDate);\n    if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n      agendaDate = isObject[0][fieldMapping.startTime];\n      agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n      this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n    }\n    var endDate;\n    if (!this.parent.hideEmptyAgendaDays || this.parent.agendaDaysCount > 0 && isObject.length > 0) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        var date = agendaDate;\n        if (!this.parent.activeViewOptions.group.byDate) {\n          this.parent.activeViewOptions.allowVirtualScrolling = false;\n          date = firstDate;\n          if (this.parent.headerModule) {\n            this.parent.headerModule.updateDateRange();\n            this.parent.headerModule.updateHeaderItems('remove');\n          }\n        }\n        this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n      } else {\n        for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n          var filterData = this.appointmentFiltering(agendaDate);\n          var nTr = this.createTableRowElement(agendaDate, 'data');\n          if (this.element.querySelector('tr[data-row-index=\"' + parseInt(nTr.getAttribute('data-row-index'), 10) + '\"]')) {\n            agendaDate = util.addDays(agendaDate, 1);\n            continue;\n          }\n          var dTd = nTr.children[0];\n          var aTd = nTr.children[1];\n          if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays && filterData.length === 0) {\n            var elementType = !this.parent.hideEmptyAgendaDays && filterData.length === 0 ? 'noEvents' : 'data';\n            dTd.appendChild(this.createDateHeaderElement(agendaDate));\n            nTr.appendChild(dTd);\n            var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n            nTr.appendChild(cTd);\n            if (cTd.querySelectorAll('li').length > 0) {\n              tBody.appendChild(nTr);\n            }\n          } else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            day--;\n          }\n          if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n            addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n          }\n          agendaDate = util.addDays(agendaDate, 1);\n          if (agendaDate.getTime() > lastDate.getTime()) {\n            break;\n          }\n        }\n      }\n      endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n    }\n    this.agendaDates = {\n      start: firstDate,\n      end: endDate\n    };\n  };\n  Agenda.prototype.agendaScrolling = function (event) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.virtualScrolling(event);\n    }\n    if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.setPersistence();\n    }\n  };\n  Agenda.prototype.virtualScrolling = function (event) {\n    var target = event.target;\n    var scrollTop = target.scrollTop;\n    var scrollHeight = target.scrollHeight;\n    var offsetHeight = target.clientHeight;\n    var totalHeight = scrollTop + offsetHeight;\n    var direction = this.virtualScrollTop < scrollTop ? 'next' : 'previous';\n    var tBody = target.querySelector('tbody');\n    var emptyTBody = createElement('tbody');\n    var topElement = this.getElementFromScrollerPosition(event);\n    var scrollDate = this.parent.getDateFromElement(topElement);\n    var filterDate;\n    var filterData;\n    if (scrollTop === 0) {\n      filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n      filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n        prepend([].slice.call(emptyTBody.childNodes), tBody);\n        this.wireEventActions();\n        for (var s = 0, element = tBody.children; s < element.length; s++) {\n          if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n            var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop - this.element.querySelector('.e-agenda-item').offsetHeight;\n            target.scrollTop = scrollToValue;\n            break;\n          }\n        }\n        this.updateHeaderText(scrollDate);\n      }\n    } else if (totalHeight >= scrollHeight - 5) {\n      filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n      filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        this.wireEventActions();\n        this.updateHeaderText(scrollDate);\n      }\n    } else {\n      this.updateHeaderText(scrollDate);\n    }\n    this.virtualScrollTop = scrollTop;\n    var selectedElements = this.parent.eventBase.getSelectedAppointments();\n    if (selectedElements.length > 0) {\n      selectedElements[selectedElements.length - 1].focus();\n    }\n  };\n  Agenda.prototype.getElementFromScrollerPosition = function (event) {\n    var filterElement;\n    var target = event.target;\n    var scrollTop = target.scrollTop;\n    var scrollHeight = target.scrollHeight;\n    var offsetHeight = target.clientHeight;\n    var totalHeight = scrollTop + offsetHeight;\n    var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n    var li;\n    var liDetails;\n    if (liCollection.length > 0) {\n      if (scrollTop === 0) {\n        li = liCollection[0];\n        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n      } else if (totalHeight === scrollHeight) {\n        li = liCollection[liCollection.length - 1];\n        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n      } else {\n        for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n          li = liCollection[parseInt(a.toString(), 10)];\n          liDetails = li.getBoundingClientRect();\n          if (liDetails.top >= 0) {\n            filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            break;\n          }\n        }\n      }\n    }\n    return filterElement;\n  };\n  Agenda.prototype.updateHeaderText = function (date) {\n    if (this.parent.showHeaderBar) {\n      this.parent.headerModule.updateDateRange(date);\n    }\n  };\n  Agenda.prototype.getPreviousNextDate = function (date, type) {\n    var currentDate = new Date(date.getTime());\n    var firstDate = this.getStartDateFromEndDate(date);\n    var lastDate = this.getEndDateFromStartDate(date);\n    var daysCount = 0;\n    do {\n      var filterData = this.appointmentFiltering(currentDate);\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        daysCount++;\n      }\n      currentDate = util.addDays(currentDate, type === 'next' ? 1 : -1);\n      if (currentDate < firstDate || currentDate > lastDate) {\n        break;\n      }\n    } while (daysCount !== this.parent.agendaDaysCount);\n    var endDate = util.addDays(currentDate, type === 'next' ? -1 : 1);\n    return type === 'next' ? {\n      start: date,\n      end: util.addDays(endDate, 1)\n    } : {\n      start: endDate,\n      end: util.addDays(date, 1)\n    };\n  };\n  Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n    var dateStart;\n    var dateEnd;\n    if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n      dateStart = util.resetTime(new Date(startDate.getTime()));\n      dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n    } else {\n      dateStart = new Date(startDate.getTime());\n      dateEnd = new Date(endDate.getTime());\n    }\n    var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    if (filterData.length === 0) {\n      this.refreshEvent(startDate);\n      filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    }\n    return filterData;\n  };\n  Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n    var filterDate;\n    var fields = this.parent.eventFields;\n    if (this.parent.eventsProcessed.length > 0) {\n      var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n        return a[fields.startTime].getTime();\n      }));\n      filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n    } else {\n      filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n    }\n    return util.resetTime(filterDate);\n  };\n  Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n    var filterDate;\n    var fieldMapping = this.parent.eventFields;\n    if (this.parent.eventsProcessed.length > 0) {\n      var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n        return a[fieldMapping.endTime].getTime();\n      }));\n      filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n    } else {\n      filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n    }\n    return util.resetTime(util.addDays(filterDate, 1));\n  };\n  Agenda.prototype.getNextPreviousDate = function (type) {\n    var noOfDays = type === 'next' ? 1 : -1;\n    return util.addDays(this.parent.selectedDate, noOfDays);\n  };\n  Agenda.prototype.startDate = function () {\n    return util.resetTime(this.parent.selectedDate);\n  };\n  Agenda.prototype.endDate = function () {\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      return this.getEndDateFromStartDate(this.startDate());\n    } else {\n      return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n    }\n  };\n  Agenda.prototype.getDateRangeText = function (date) {\n    var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n    if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n      var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n      return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, {\n        format: formatDate,\n        calendar: this.parent.getCalendarMode()\n      }), 'multiple');\n    } else {\n      var startDate = this.parent.selectedDate;\n      var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n      return this.formatDateRange(startDate, endDate);\n    }\n  };\n  Agenda.prototype.dayNavigationClick = function (e) {\n    var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n    var date = this.parent.getDateFromElement(element);\n    if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n      this.parent.setProperties({\n        selectedDate: date\n      }, true);\n      this.parent.changeView('Day', e);\n    }\n  };\n  Agenda.prototype.wireEvents = function () {\n    EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n  };\n  Agenda.prototype.unWireEvents = function () {\n    EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n    var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n    for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n      var element = dateHeaderElement_1[_i];\n      EventHandler.remove(element, 'click', this.dayNavigationClick);\n    }\n  };\n  Agenda.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.eventLoad, this);\n  };\n  Agenda.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n      this.parent.off(event.dataReady, this.eventLoad);\n    }\n  };\n  Agenda.prototype.onAgendaScrollUiUpdate = function () {\n    var headerHeight = this.getHeaderBarHeight();\n    if (this.parent.headerModule) {\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.parent.headerModule.updateHeaderItems('add');\n      } else {\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n    }\n    var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.parent.height !== 'auto') {\n      contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n    }\n  };\n  Agenda.prototype.scrollToDate = function (scrollDate) {\n    var date = new Date(+util.resetTime(scrollDate));\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, util.addDays(date, 1), true).length > 0) {\n        this.parent.changeDate(date);\n      }\n    } else {\n      var dateElement = this.element.querySelector('.' + cls.AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n      if (dateElement) {\n        this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n      }\n    }\n  };\n  Agenda.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    if (this.element) {\n      this.unWireEvents();\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n      if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n      _super.prototype.destroy.call(this);\n    }\n  };\n  return Agenda;\n}(AgendaBase);\nexport { Agenda };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","formatUnit","isNullOrUndefined","closest","extend","append","prepend","remove","createElement","addClass","EventHandler","AgendaBase","util","event","cls","Agenda","_super","parent","_this","call","viewClass","isInverseTableSelect","agendaDates","virtualScrollTop","getModuleName","renderLayout","element","className","TABLE_WRAP_CLASS","appendChild","createTableLayout","OUTER_TABLE_CLASS","querySelector","setAttribute","TABLE_CONTAINER_CLASS","eTr","workTd","wrap","CONTENT_WRAP_CLASS","tbl","CONTENT_TABLE_CLASS","setAriaAttributes","tBody","agendaDate","resetTime","selectedDate","renderEmptyContent","wireEvents","resourceBase","generateResourceLevels","renderDates","activeView","uiStateValues","isGroupAdaptive","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","notify","contentReady","eventLoad","args","dataSource","eventsData","_i","_a","length","event_1","generatedDates","eventCollection","activeViewOptions","allowVirtualScrolling","processedData","eventsProcessed","resource","lastResourceLevel","groupIndex","eventBase","filterEventsByResource","processAgendaEvents","removeChildren","renderInitialContent","wireEventActions","contentArea","scrollTop","eventsLoaded","retainScrollPosition","refreshEvent","refreshDate","fields","eventFields","data","recurrenceID","recurrenceRule","end","concat","generateOccurrence","refreshHeader","group","byDate","firstElementChild","emptyTBody","firstDate","Date","getTime","lastDate","hideEmptyAgendaDays","getEndDateFromStartDate","addDays","agendaDaysCount","renderContent","slice","childNodes","getContentAreaElement","contentChild","offsetWidth","clientWidth","isAdaptive","offsetHeight","clientHeight","emptyTBody_1","minDate","fieldMapping","isObject","appointmentFiltering","startTime","setHours","updateHeaderText","endDate","resources","date","headerModule","updateDateRange","updateHeaderItems","calculateResourceTableElement","day","filterData","nTr","createTableRowElement","parseInt","getAttribute","dTd","children","aTd","elementType","createDateHeaderElement","cTd","createAgendaContentElement","querySelectorAll","isCurrentDate","AGENDA_CURRENT_DAY_CLASS","MS_PER_DAY","start","agendaScrolling","quickPopup","quickPopupHide","virtualScrolling","setPersistence","target","scrollHeight","totalHeight","direction","topElement","getElementFromScrollerPosition","scrollDate","getDateFromElement","filterDate","getPreviousNextDate","s","toString","scrollToValue","offsetTop","selectedElements","getSelectedAppointments","focus","filterElement","liCollection","li","liDetails","AGENDA_CELLS_CLASS","a","length_1","getBoundingClientRect","top","showHeaderBar","type","currentDate","getStartDateFromEndDate","daysCount","startDate","dateStart","dateEnd","setTime","filterEvents","Math","min","apply","map","addMonths","max","endTime","maxDate","getNextPreviousDate","noOfDays","getDateRangeText","formatDate","dateFormat","capitalizeFirstWord","globalize","format","calendar","getCalendarMode","formatDateRange","dayNavigationClick","e","currentTarget","isMinMaxDate","setProperties","changeView","add","scroll","unWireEvents","dateHeaderElement","dateHeaderElement_1","addEventListener","on","scrollUiUpdate","onAgendaScrollUiUpdate","dataReady","removeEventListener","off","headerHeight","getHeaderBarHeight","height","style","scrollToDate","getEvents","changeDate","dateElement","destroy","isDestroyed"],"sources":["D:/xampp/htdocs/biolabs/biolabs/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/agenda.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend, remove } from '@syncfusion/ej2-base';\nimport { createElement, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        return _this;\n    }\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ?\n            args.processedData : this.parent.eventsProcessed;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        util.removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(event.eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var data = _a[_i];\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.refreshHeader = function () {\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        if (this.parent.activeViewOptions.group.byDate) {\n            util.removeChildren(tBody);\n        }\n        else {\n            remove(tBody.firstElementChild);\n        }\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.renderEmptyContent(tBody, agendaDate);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            agendaDate = isObject[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange();\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var filterData = this.appointmentFiltering(agendaDate);\n                    var nTr = this.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[data-row-index=\"' + parseInt(nTr.getAttribute('data-row-index'), 10) + '\"]')) {\n                        agendaDate = util.addDays(agendaDate, 1);\n                        continue;\n                    }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    Agenda.prototype.agendaScrolling = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n                        var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight >= (scrollHeight - 5)) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[parseInt(a.toString(), 10)];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(date);\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            var filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fields.startTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fieldMapping.endTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n        var date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day', e);\n        }\n    };\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n            this.parent.off(event.dataReady, this.eventLoad);\n        }\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n        }\n    };\n    Agenda.prototype.scrollToDate = function (scrollDate) {\n        var date = new Date(+util.resetTime(scrollDate));\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, util.addDays(date, 1), true).length > 0) {\n                this.parent.changeDate(date);\n            }\n        }\n        else {\n            var dateElement = this.element.querySelector('.' + cls.AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n            if (dateElement) {\n                this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n            }\n        }\n    };\n    Agenda.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Agenda;\n}(AgendaBase));\nexport { Agenda };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}