{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */function (_super) {\n  __extends(VerticalView, _super);\n  function VerticalView(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.viewClass = 'e-day-view';\n    _this.isInverseTableSelect = true;\n    _this.baseCssClass = 'e-vertical-view';\n    _this.appointment = null;\n    return _this;\n  }\n  VerticalView.prototype.getModuleName = function () {\n    return 'verticalView';\n  };\n  VerticalView.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.renderEvents, this);\n  };\n  VerticalView.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n      this.parent.off(event.dataReady, this.renderEvents);\n    }\n  };\n  VerticalView.prototype.renderEvents = function () {\n    this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n    this.appointment.renderAppointments();\n    this.parent.notify(event.eventsLoaded, {});\n  };\n  VerticalView.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    var target = e.target;\n    this.parent.notify(event.virtualScroll, e);\n    this.scrollLeftPanel(target);\n    this.scrollTopPanel(target);\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = target.scrollTop;\n    }\n    this.parent.uiStateValues.left = target.scrollLeft;\n    if (!isNullOrUndefined(this.parent.quickPopup)) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n    this.setPersistence();\n  };\n  VerticalView.prototype.onAdaptiveMove = function (e) {\n    if (this.parent.uiStateValues.action) {\n      e.preventDefault();\n    }\n  };\n  VerticalView.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.removeNewEventElement();\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n  };\n  VerticalView.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n    if (!isNullOrUndefined(leftPanel)) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n  VerticalView.prototype.scrollUiUpdate = function (args) {\n    if (!this.parent) {\n      return;\n    }\n    var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    var headerBarHeight = this.getHeaderBarHeight();\n    var timeCells = this.getLeftPanelElement();\n    var content = this.getScrollableElement();\n    var header = this.getDatesHeaderElement();\n    var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n    this.setColWidth(content);\n    this.setContentHeight(content, timeCells, scrollerHeight);\n    var scrollBarWidth = util.getScrollBarWidth();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    header.style[args.cssProperties.rtlPadding] = '';\n    var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains('e-all-day-scroll')) : true;\n    if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = '';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.style[args.cssProperties.padding] = '';\n    }\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        if (this.parent.currentView.indexOf('Timeline') > -1) {\n          content.scrollTop = this.parent.uiStateValues.top;\n        }\n        this.scrollToWorkHour();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        if (timeCells) {\n          timeCells.scrollTop = this.parent.uiStateValues.top;\n        }\n        content.scrollTop = this.parent.uiStateValues.top;\n        content.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.highlightCurrentTime();\n    }\n    this.retainScrollPosition();\n  };\n  VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    } else {\n      if (!isNullOrUndefined(leftPanelElement)) {\n        leftPanelElement.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height - this.getScrollXIndent(element));\n      }\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    }\n  };\n  VerticalView.prototype.scrollToWorkHour = function () {\n    if (this.parent.workHours.highlight) {\n      var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n      if (firstWorkHourCell) {\n        this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n  };\n  VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n    var date = this.parent.getStartEndTime(hour);\n    if (!isNullOrUndefined(scrollDate)) {\n      var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n      if (headerElement) {\n        if (this.parent.enableRtl) {\n          var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n          this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n        } else {\n          this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n        }\n      }\n    }\n    if (isNullOrUndefined(date)) {\n      return;\n    }\n    this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n  };\n  VerticalView.prototype.scrollToDate = function (scrollDate) {\n    this.scrollToHour(null, scrollDate);\n  };\n  VerticalView.prototype.generateColumnLevels = function () {\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    var columnLevels = [];\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n      if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n        while (columnLevels[0].length === 0) {\n          this.parent.setProperties({\n            selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction)\n          }, true);\n          this.parent.activeView.getRenderDates();\n          if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n            this.parent.headerModule.updateDateRange();\n          }\n          level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n          columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n        }\n      }\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n        var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n        var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n        columnLevels = [dateSlots];\n      }\n    } else {\n      columnLevels.push(level);\n    }\n    this.colLevels = columnLevels;\n    return columnLevels;\n  };\n  // eslint-disable-next-line max-len\n  VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n    if (workStartHour === void 0) {\n      workStartHour = this.parent.workHours.start;\n    }\n    if (workEndHour === void 0) {\n      workEndHour = this.parent.workHours.end;\n    }\n    var dateCol = [];\n    var start = this.parent.getStartEndTime(workStartHour);\n    var end = this.parent.getStartEndTime(workEndHour);\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList = [cls.HEADER_CELLS_CLASS];\n      if (this.isCurrentDate(col)) {\n        classList.push(cls.CURRENT_DAY_CLASS);\n      }\n      dateCol.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList,\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+start),\n        endHour: new Date(+end)\n      });\n    }\n    return dateCol;\n  };\n  VerticalView.prototype.isWorkHourRange = function (date) {\n    return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n  };\n  VerticalView.prototype.highlightCurrentTime = function () {\n    var _this = this;\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return;\n    }\n    if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n      if (currentDateIndex.length > 0) {\n        var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        if (workCells.length > 0) {\n          this.changeCurrentTimePosition();\n        }\n        if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n          var currentDate = this.parent.getCurrentTime();\n          var interval = util.MS_PER_MINUTE - (currentDate.getSeconds() * 1000 + currentDate.getMilliseconds());\n          if (interval <= util.MS_PER_MINUTE - 1000) {\n            window.setTimeout(function () {\n              if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                _this.clearCurrentTimeIndicatorTimer();\n                _this.changeCurrentTimePosition();\n                _this.updateCurrentTimeIndicatorTimer();\n              }\n            }, interval);\n          }\n          this.updateCurrentTimeIndicatorTimer();\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    } else {\n      this.clearCurrentTimeIndicatorTimer();\n    }\n  };\n  VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n    if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var count = 0;\n      if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.byDate) {\n        for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n          var resource = _a[_i];\n          if (util.resetTime(resource.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n            currentDateIndex.push(count);\n          }\n          count += 1;\n        }\n      } else {\n        for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n          var resource = _c[_b];\n          var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n          if (index >= 0) {\n            var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n            currentDateIndex.push(resIndex);\n          }\n          count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n        }\n      }\n    } else {\n      var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n      var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n    }\n    return currentDateIndex;\n  };\n  VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n    if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n      window.clearInterval(this.currentTimeIndicatorTimer);\n      this.currentTimeIndicatorTimer = null;\n      this.removeCurrentTimeIndicatorElements();\n    }\n  };\n  VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n    var _this = this;\n    this.currentTimeIndicatorTimer = window.setInterval(function () {\n      _this.changeCurrentTimePosition();\n    }, util.MS_PER_MINUTE);\n  };\n  VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n    var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n    var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n    for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n      var indicator = timeIndicator_1[_i];\n      remove(indicator);\n    }\n  };\n  VerticalView.prototype.changeCurrentTimePosition = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var firstRow = this.parent.getContentTable().rows[0];\n    var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n    var topInPx = formatUnit(top);\n    var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n    var timeCellsWrap = this.getLeftPanelElement();\n    var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n    if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n      return;\n    }\n    var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n    for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n      curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', {\n        className: cls.PREVIOUS_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n    for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n      var day = currentDateIndex_1[_i];\n      curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', {\n        className: cls.CURRENT_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: cls.CURRENT_TIME_CLASS,\n      styles: 'top:' + topInPx\n    });\n    if (rowIndex <= timeTrs.length) {\n      removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n      if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n        addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n      }\n      prepend([currentTimeEle], timeCellsWrap);\n      currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n    }\n  };\n  VerticalView.prototype.getTopFromDateTime = function (date) {\n    var startHour = this.getStartHour();\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n  };\n  VerticalView.prototype.getWorkCellHeight = function () {\n    return parseFloat(this.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n  };\n  VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n    var cntEle;\n    var wrapper = createElement('div');\n    var templateName = '';\n    var templateId = this.parent.element.id + '_';\n    switch (type) {\n      case 'dateHeader':\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          templateName = 'dateHeaderTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        } else {\n          wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" : \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" + (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'majorSlot':\n        if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n          templateName = 'majorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'minorSlot':\n        if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n          templateName = 'minorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'alldayCells':\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var viewName = this.parent.activeViewOptions.cellTemplateName;\n          templateName = 'cellTemplate';\n          var args = {\n            date: date,\n            type: type,\n            groupIndex: groupIndex\n          };\n          cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        }\n        break;\n    }\n    return cntEle;\n  };\n  VerticalView.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(event.contentReady, {});\n  };\n  VerticalView.prototype.renderLayout = function (type) {\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.baseCssClass, this.viewClass];\n    clsList.push(type);\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n    }\n    if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n      clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n    }\n    if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(cls.IGNORE_WHITESPACE);\n    }\n    this.renderPanel(type);\n    addClass([this.element], clsList);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n    this.parent.notify(event.contentReady, {});\n  };\n  VerticalView.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var indentTd = createElement('td', {\n        className: cls.LEFT_INDENT_CLASS\n      });\n      indentTd.appendChild(this.renderLeftIndent());\n      tr.appendChild(indentTd);\n    }\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n  VerticalView.prototype.renderContent = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n    }\n    var tr = createElement('tr');\n    var workTd = createElement('td');\n    if (this.parent.isAdaptive) {\n      workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n      var scrollContainer = createElement('div', {\n        className: cls.SCROLL_CONTAINER_CLASS\n      });\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        scrollContainer.appendChild(this.renderTimeCells());\n      }\n      scrollContainer.appendChild(this.renderContentArea());\n      workTd.appendChild(scrollContainer);\n      EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n      EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n      tr.appendChild(workTd);\n    } else {\n      var levels = this.colLevels.slice(0);\n      if (this.parent.virtualScrollModule) {\n        this.resetColLevels();\n      }\n      var wrap = this.renderContentArea();\n      workTd.appendChild(wrap);\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var timesTd = createElement('td');\n        timesTd.appendChild(this.renderTimeCells());\n        tr.appendChild(timesTd);\n      }\n      tr.appendChild(workTd);\n      if (this.parent.virtualScrollModule) {\n        this.colLevels = levels;\n        this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n      }\n    }\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n  VerticalView.prototype.renderLeftIndent = function () {\n    var wrap = createElement('div', {\n      className: cls.LEFT_INDENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var nth;\n    for (var i = 0; i < rowCount; i++) {\n      var ntr_1 = trEle.cloneNode();\n      var data_1 = {\n        className: [this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0]],\n        type: 'emptyCells'\n      };\n      if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n        data_1.className.push(cls.WEEK_NUMBER_CLASS);\n        var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n        data_1.template = [createElement('span', {\n          innerHTML: '' + weekNo,\n          attrs: {\n            title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n          }\n        })];\n      }\n      nth = this.createTd(data_1);\n      this.parent.renderHeaderIndentTemplate(data_1, nth);\n      ntr_1.appendChild(nth);\n      tbl.querySelector('tbody').appendChild(ntr_1);\n    }\n    var ntr = trEle.cloneNode();\n    var appointmentExpandCollapse = createElement('div', {\n      attrs: {\n        'tabindex': '0',\n        'role': 'list',\n        title: this.parent.localeObj.getConstant('expandAllDaySection'),\n        'aria-disabled': 'false',\n        'aria-label': 'Expand section'\n      },\n      className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' + cls.ICON + ' ' + cls.DISABLE_CLASS\n    });\n    var data = {\n      className: [cls.ALLDAY_CELLS_CLASS],\n      type: 'emptyCells'\n    };\n    nth = this.createTd(data);\n    nth.appendChild(appointmentExpandCollapse);\n    this.parent.renderHeaderIndentTemplate(data, nth);\n    ntr.appendChild(nth);\n    tbl.querySelector('tbody').appendChild(ntr);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n  VerticalView.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: cls.DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS\n    });\n    var rowCount = this.colLevels.length;\n    var lastLevel = this.colLevels[rowCount - 1];\n    for (var i = 0; i < rowCount; i++) {\n      var ntr = trEle.cloneNode();\n      var level = this.colLevels[parseInt(i.toString(), 10)];\n      for (var j = 0; j < level.length; j++) {\n        ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n      }\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n    this.createAllDayRow(tbl, lastLevel);\n    this.createColGroup(tbl, lastLevel);\n    wrap.appendChild(tbl);\n    return container;\n  };\n  VerticalView.prototype.createAllDayRow = function (table, tdData) {\n    var ntr = createElement('tr', {\n      className: cls.ALLDAY_ROW_CLASS\n    });\n    for (var j = 0; j < tdData.length; j++) {\n      var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n      td.className = [cls.ALLDAY_CELLS_CLASS];\n      td.type = 'alldayCells';\n      var ntd = this.createTd(td);\n      ntd.setAttribute('data-date', td.date.getTime().toString());\n      if (!isNullOrUndefined(td.groupIndex)) {\n        ntd.setAttribute('data-group-index', '' + td.groupIndex);\n      } else if (this.parent.uiStateValues.isGroupAdaptive) {\n        ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n      }\n      this.wireCellEvents(ntd);\n      ntr.appendChild(ntd);\n    }\n    table.querySelector('tbody').appendChild(ntr);\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n    prepend([thead], table);\n  };\n  VerticalView.prototype.createTd = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n    if (td.date && td.type) {\n      var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n      if (ele && ele.length) {\n        append(ele, tdEle);\n      }\n    }\n    if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n      addClass([tdEle], cls.DISABLE_DATES);\n    }\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n    if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n      if (!isNullOrUndefined(td.groupIndex)) {\n        tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n      this.wireMouseEvents(tdEle);\n    }\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tdEle;\n  };\n  VerticalView.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    this.wireMouseEvents(element);\n  };\n  VerticalView.prototype.wireMouseEvents = function (element) {\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n  VerticalView.prototype.renderTimeCells = function () {\n    var _this = this;\n    var wrap = createElement('div', {\n      className: cls.TIME_CELLS_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n      var ntr = trEle.cloneNode();\n      var data = {\n        date: r.date,\n        type: r.type,\n        className: r.className\n      };\n      ntr.appendChild(_this.createTd(data));\n      tbl.querySelector('tbody').appendChild(ntr);\n      return r;\n    };\n    this.getTimeSlotRows(handler);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n  VerticalView.prototype.renderContentArea = function () {\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    this.addAutoHeightClass(tbl);\n    this.renderContentTable(tbl);\n    this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n    wrap.appendChild(tbl);\n    this.wireCellEvents(tbl.querySelector('tbody'));\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n    return wrap;\n  };\n  VerticalView.prototype.renderContentTable = function (table) {\n    var tBody = table.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n    this.renderContentTableHeader(table);\n  };\n  VerticalView.prototype.getContentRows = function () {\n    var _this = this;\n    var rows = [];\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n    var handler = function (r) {\n      var ntr = tr.cloneNode();\n      for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n        var ntd = _this.createContentTd(tdData, r, td);\n        ntr.appendChild(ntd);\n      }\n      rows.push(ntr);\n      return r;\n    };\n    this.getTimeSlotRows(handler);\n    return rows;\n  };\n  VerticalView.prototype.createContentTd = function (tdData, r, td) {\n    var ntd = td.cloneNode();\n    if (tdData.colSpan) {\n      ntd.setAttribute('colspan', tdData.colSpan.toString());\n    }\n    var clsName = this.getContentTdClass(r);\n    var cellDate = util.resetTime(tdData.date);\n    if (!this.parent.isMinMaxDate(cellDate)) {\n      clsName.push(cls.DISABLE_DATES);\n    }\n    util.setTime(cellDate, util.getDateInMs(r.date));\n    var type = 'workCells';\n    if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n      clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n    if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n      clsName.push(cls.WORK_HOURS_CLASS);\n    }\n    addClass([ntd], clsName);\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: cellDate,\n        type: type,\n        groupIndex: tdData.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n      append(tooltipTemplate, ntd);\n    }\n    ntd.setAttribute('data-date', cellDate.getTime().toString());\n    if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: cellDate,\n      groupIndex: tdData.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return ntd;\n  };\n  VerticalView.prototype.getContentTdClass = function (r) {\n    return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n  };\n  VerticalView.prototype.renderContentTableHeader = function (table) {\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper());\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n    }\n    prepend([thead], table);\n  };\n  VerticalView.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n  VerticalView.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n  };\n  VerticalView.prototype.getEndDateFromStartDate = function (start) {\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var end = new Date(start.getTime());\n    end.setMilliseconds(end.getMilliseconds() + msInterval);\n    return end;\n  };\n  VerticalView.prototype.getTimeSlotRows = function (handler) {\n    var rows = [];\n    var startHour = this.getStartHour();\n    var endHour = this.getEndHour();\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var length = Math.round(util.MS_PER_DAY / msInterval);\n    var msStartHour = startHour.getTime();\n    var msEndHour = endHour.getTime();\n    if (msStartHour !== msEndHour) {\n      var duration = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n      length = Math.abs(msEndHour - msStartHour) / msInterval - (new Date(msEndHour).getTimezoneOffset() - new Date(msStartHour).getTimezoneOffset()) / duration;\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      length = 1;\n    }\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var end = this.parent.getStartEndTime(this.parent.workHours.end);\n    for (var i = 0; i < length; i++) {\n      var dt = new Date(msStartHour + msInterval * i);\n      if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n        var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n        dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n      }\n      var majorTickDivider = i % (msMajorInterval / msInterval);\n      var row = {\n        date: new Date('' + dt),\n        startHour: start,\n        endHour: end,\n        first: majorTickDivider === 0,\n        middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n        last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n        type: ''\n      };\n      if (handler) {\n        handler(row);\n      }\n      rows.push(row);\n    }\n    return rows;\n  };\n  VerticalView.prototype.getAdjustedDate = function (startTime) {\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      return new Date(startTime.setHours(0, 0, 0, 0));\n    } else {\n      var timeSlots = this.getTimeSlotRows();\n      var startDate = new Date(new Date(timeSlots[0].date.getTime()).setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n      for (var i = 0; i < timeSlots.length; i++) {\n        if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n          startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n          return new Date(startTime);\n        }\n      }\n    }\n    return null;\n  };\n  VerticalView.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.clearCurrentTimeIndicatorTimer();\n    if (this.element) {\n      if (this.appointment) {\n        this.appointment.destroy();\n        this.appointment = null;\n      }\n      var contentScrollableEle = this.getContentAreaElement();\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n      }\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n      _super.prototype.destroy.call(this);\n    }\n  };\n  return VerticalView;\n}(ViewBase);\nexport { VerticalView };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","extend","EventHandler","formatUnit","Browser","createElement","remove","addClass","removeClass","append","prepend","ViewBase","VerticalEvent","MonthEvent","util","event","cls","VerticalView","_super","parent","_this","call","viewClass","isInverseTableSelect","baseCssClass","appointment","getModuleName","addEventListener","on","scrollUiUpdate","dataReady","renderEvents","removeEventListener","off","activeViewOptions","timeScale","enable","renderAppointments","notify","eventsLoaded","onContentScroll","e","removeNewEventElement","target","virtualScroll","scrollLeftPanel","scrollTopPanel","isAdaptive","uiStateValues","top","scrollTop","left","scrollLeft","quickPopup","quickPopupHide","setPersistence","onAdaptiveMove","action","preventDefault","onAdaptiveScroll","isDestroyed","leftPanel","getLeftPanelElement","args","dateHeader","element","querySelector","DATE_HEADER_WRAP_CLASS","headerBarHeight","getHeaderBarHeight","timeCells","content","getScrollableElement","header","getDatesHeaderElement","scrollerHeight","offsetHeight","setColWidth","setContentHeight","scrollBarWidth","getScrollBarWidth","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","isDateHeaderScroll","enableAllDayScroll","offsetWidth","clientWidth","classList","contains","border","padding","isPreventScrollUpdate","isInitial","currentView","indexOf","scrollToWorkHour","highlightCurrentTime","retainScrollPosition","leftPanelElement","height","isTimelineView","getScrollXIndent","workHours","highlight","firstWorkHourCell","WORK_HOURS_CLASS","offsetTop","scrollToHour","hour","scrollDate","date","getStartEndTime","headerElement","HEADER_CELLS_CLASS","Date","resetTime","getTime","enableRtl","conWrap","CONTENT_TABLE_CLASS","offsetLeft","getTopFromDateTime","scrollToDate","generateColumnLevels","level","getDateSlots","renderDates","workDays","columnLevels","group","resources","length","resourceBase","generateResourceLevels","hideNonWorkingDays","setProperties","selectedDate","activeView","getNextPreviousDate","previousNextAction","getRenderDates","headerModule","setCalendarDate","updateDateRange","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","resStartHour","resourceData","resource","startHourField","resEndHour","endHourField","dateSlots","push","colLevels","workStartHour","workEndHour","start","end","dateCol","_i","renderDates_1","col","isCurrentDate","CURRENT_DAY_CLASS","type","className","colSpan","startHour","endHour","isWorkHourRange","getStartHour","getEndHour","headerRows","slice","option","showTimeIndicator","getCurrentTime","currentDateIndex","getCurrentTimeIndicatorIndex","workCells","querySelectorAll","WORK_CELLS_CLASS","changeCurrentTimePosition","currentTimeIndicatorTimer","currentDate","interval","MS_PER_MINUTE","getSeconds","getMilliseconds","window","setTimeout","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","count","virtualScrollModule","allowVirtualScrolling","byDate","_a","expandedResources","_b","_c","renderedResources","index","getIndexOfDate","resIndex","clearInterval","removeCurrentTimeIndicatorElements","setInterval","queryString","PREVIOUS_TIMELINE_CLASS","CURRENT_TIMELINE_CLASS","CURRENT_TIME_CLASS","timeIndicator","timeIndicator_1","indicator","firstRow","getContentTable","rows","topInPx","rowIndex","Math","floor","cells","timeCellsWrap","timeTrs","isNaN","curTimeWrap","TIMELINE_WRAPPER_CLASS","i","length_1","parseInt","toString","appendChild","styles","currentDateIndex_1","day","currentTimeEle","innerHTML","getTimeString","HIDE_CHILDS_CLASS","lastElementChild","diffInMinutes","getHours","getMinutes","getWorkCellHeight","slotCount","parseFloat","getBoundingClientRect","toFixed","getTdContent","cntEle","wrapper","templateName","templateId","id","dateHeaderTemplate","viewName","dateHeaderTemplateName","getDateHeaderTemplate","getTimelineDate","capitalizeFirstWord","getDayName","getDate","childNodes","majorSlotTemplate","getMajorSlotTemplate","minorSlotTemplate","getMinorSlotTemplate","cellTemplate","cellTemplateName","getCellTemplate","refreshHeader","renderHeader","contentReady","renderLayout","setPanel","TABLE_WRAP_CLASS","clsList","TIMESCALE_DISABLE","VIRTUAL_SCROLL_CLASS","rowAutoHeight","eventSettings","ignoreWhitespace","IGNORE_WHITESPACE","renderPanel","createTableLayout","OUTER_TABLE_CLASS","setAttribute","renderContent","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","tr","dateTd","renderDatesHeader","indentTd","LEFT_INDENT_CLASS","renderLeftIndent","workTd","scrollContainer","SCROLL_CONTAINER_CLASS","renderTimeCells","renderContentArea","add","touchMoveEvent","levels","resetColLevels","wrap","timesTd","renderVirtualTrack","LEFT_INDENT_WRAP_CLASS","tbl","trEle","rowCount","nth","ntr_1","cloneNode","data_1","showWeekNumber","WEEK_NUMBER_CLASS","weekNo","getWeekNumberContent","template","attrs","title","localeObj","getConstant","createTd","renderHeaderIndentTemplate","ntr","appointmentExpandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","ICON","DISABLE_CLASS","data","ALLDAY_CELLS_CLASS","container","DATE_HEADER_CONTAINER_CLASS","HEADER_ROW_CLASS","lastLevel","j","createAllDayRow","createColGroup","table","tdData","ALLDAY_ROW_CLASS","td","ntd","wireCellEvents","thead","eventBase","createEventWrapper","tdEle","addAttributes","ele","isMinMaxDate","DISABLE_DATES","setResourceHeaderContent","wireMouseEvents","elementType","trigger","renderCell","workCellAction","cellMouseDown","cellClick","cellDblClick","TIME_CELLS_WRAP_CLASS","handler","r","first","last","TIME_CELLS_CLASS","TIME_SLOT_CLASS","getTimeSlotRows","CONTENT_WRAP_CLASS","setAriaAttributes","addAutoHeightClass","renderContentTable","tBody","getContentRows","renderContentTableHeader","createContentTd","clsName","getContentTdClass","cellDate","setTime","getDateInMs","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","isWorkHour","isWorkDay","args_1","scheduleId","tooltipTemplate","ALTERNATE_CELLS_CLASS","getContentAreaElement","getEndDateFromStartDate","msMajorInterval","msInterval","setMilliseconds","round","MS_PER_DAY","msStartHour","msEndHour","duration","abs","getTimezoneOffset","dt","isDaylightSavingTime","timeOffset","majorTickDivider","row","middle","getAdjustedDate","startTime","setHours","timeSlots","startDate","destroy","contentScrollableEle","scheduleTouchModule","resetValues"],"sources":["D:/xampp/htdocs/biolabs/biolabs/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/vertical-view.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.appointment = null;\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(event.dataReady, this.renderEvents);\n        }\n    };\n    VerticalView.prototype.renderEvents = function () {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onAdaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        if (!this.parent) {\n            return;\n        }\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timeCells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setColWidth(content);\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                if (this.parent.currentView.indexOf('Timeline') > -1) {\n                    content.scrollTop = this.parent.uiStateValues.top;\n                }\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (!isNullOrUndefined(scrollDate)) {\n            var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n            if (headerElement) {\n                if (this.parent.enableRtl) {\n                    var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n                    this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n                }\n                else {\n                    this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n                }\n            }\n        }\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.scrollToDate = function (scrollDate) {\n        this.scrollToHour(null, scrollDate);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                while (columnLevels[0].length === 0) {\n                    this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);\n                    this.parent.activeView.getRenderDates();\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n                        this.parent.headerModule.updateDateRange();\n                    }\n                    level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n                    columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n                }\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    var currentDate = this.parent.getCurrentTime();\n                    var interval = util.MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (util.MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(function () {\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                                _this.clearCurrentTimeIndicatorTimer();\n                                _this.changeCurrentTimePosition();\n                                _this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling &&\n                this.parent.activeViewOptions.group.byDate) {\n                for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n                    var resource = _a[_i];\n                    if (util.resetTime(resource.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n                        currentDateIndex.push(count);\n                    }\n                    count += 1;\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n                    var resource = _c[_b];\n                    var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n                    if (index >= 0) {\n                        var resIndex = this.parent.activeViewOptions.group.byDate ?\n                            (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                        currentDateIndex.push(resIndex);\n                    }\n                    count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n                }\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n        var _this = this;\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n                addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return parseFloat(this.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            var levels = this.colLevels.slice(0);\n            if (this.parent.virtualScrollModule) {\n                this.resetColLevels();\n            }\n            var wrap = this.renderContentArea();\n            workTd.appendChild(wrap);\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n            if (this.parent.virtualScrollModule) {\n                this.colLevels = levels;\n                this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n            }\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var nth;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data_1);\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\n            ntr_1.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr', { className: cls.ALLDAY_ROW_CLASS });\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.getContentRows = function () {\n        var _this = this;\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        return rows;\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = util.resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        util.setTime(cellDate, util.getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            var duration = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / duration);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.getTimeSlotRows();\n            var startDate = new Date(new Date(timeSlots[0].date.getTime()).\n                setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n                    startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n                    return new Date(startTime);\n                }\n            }\n        }\n        return null;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}