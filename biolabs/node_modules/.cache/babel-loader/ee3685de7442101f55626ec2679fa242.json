{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */function (_super) {\n  __extends(YearEvent, _super);\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n    _this.isResource = false;\n    return _this;\n  }\n  YearEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + cls.APPOINTMENT_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n    this.renderedEvents = [];\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n  };\n  YearEvent.prototype.yearViewEvents = function () {\n    var months = this.getMonths();\n    for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n      var month = months_1[_i];\n      var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n      var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = util.resetTime(new Date(startDate.getTime()));\n        var end = util.addDays(new Date(start.getTime()), 1);\n        startDate = util.addDays(new Date(startDate.getTime()), 1);\n        if (!this.parent.isMinMaxDate(start)) {\n          continue;\n        }\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n        if (filterEvents.length > 0) {\n          var workCell = workCells[parseInt(index.toString(), 10)];\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: cls.APPOINTMENT_CLASS\n            }));\n          }\n        }\n      }\n    }\n  };\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var months = this.getMonths();\n    var groupIndex = this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : undefined;\n    for (var row = 0; row < months.length; row++) {\n      var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n          td = dayIndex + 1;\n          var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n          if (!eventWrapper_1) {\n            eventWrapper_1 = createElement('div', {\n              className: cls.APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper_1);\n          }\n          if (this.parent.enableRtl) {\n            rightValue = row * this.cellWidth;\n          } else {\n            leftValue = row * this.cellWidth;\n          }\n        } else {\n          if (this.parent.enableRtl) {\n            rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          } else {\n            leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n          }\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = util.resetTime(new Date(monthStart.getTime()));\n        var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n        dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP + this_1.moreIndicatorHeight;\n          var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n          var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n          var moreIndicatorCount = count - renderedAppCount <= 0 ? 1 : count - renderedAppCount;\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n              var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n              return \"continue\";\n            } else if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n          var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n          if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n            this_1.updateCellHeight(rowTd, availedHeight);\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              eventData.MoreIndicator = true;\n              this_1.renderedEvents.push(eventData);\n              isSpannedCollection.push(eventData);\n            }\n          }\n        };\n        var this_1 = this;\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          _loop_1(index, count);\n        }\n        monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n  };\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n    eventObj.data = data;\n  };\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n    var months = this.getMonths();\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < months.length; month++) {\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n        for (var month = 0; month < months.length; month++) {\n          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n          this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n        }\n      }\n    }\n  };\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n    this.groupOrder = resource.groupOrder;\n    for (var a = 0; a < eventDatas.length; a++) {\n      var data = eventDatas[parseInt(a.toString(), 10)];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this.isSpannedEvent(eventData, monthStart);\n        overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n      var availedHeight = this.cellHeader + this.eventHeight * (a + 1) + EVENT_GAP + this.moreIndicatorHeight;\n      var leftValue = this.parent.activeViewOptions.orientation === 'Vertical' ? month * this.cellWidth : index * this.cellWidth;\n      if (!this.parent.isMinMaxDate(eventData[this.fields.startTime])) {\n        return;\n      }\n      if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n        this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n        this.updateCellHeight(td, availedHeight);\n      } else {\n        var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            this.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], {\n              Index: overlapIndex + i\n            }, true));\n          }\n        }\n        break;\n      }\n    }\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n    var _this = this;\n    var eventObj = this.isSpannedEvent(eventData, monthDate);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n    if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n      return;\n    }\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.cellWidth;\n    }\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n        _this.wireAppointmentEvents(wrap, eventObj);\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal' || !eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  };\n  // eslint-disable-next-line max-len\n  YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n    if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n      return;\n    }\n    var endDate;\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = util.addDays(new Date(startDate.getTime()), 1);\n    }\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-label': this.parent.getAnnouncementString(record)\n      }\n    });\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], cls.READ_ONLY);\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n        templateElement.push(subjectEle);\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n  YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n    var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n    var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n    if (eventStart.getTime() < monthStart.getTime()) {\n      eventData[this.fields.startTime] = monthStart;\n      isSpanned.isLeft = true;\n    }\n    if (eventEnd.getTime() > monthEnd.getTime()) {\n      eventData[this.fields.endTime] = monthEnd;\n      isSpanned.isRight = true;\n    }\n    if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n      var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n      var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n      if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n        end = util.addDays(new Date(end), -1).getTime();\n      }\n      isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n    }\n    eventData.isSpanned = isSpanned;\n    if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n      eventData[this.fields.startTime] = this.parent.minDate;\n    }\n    if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n      eventData[this.fields.endTime] = this.parent.maxDate;\n    }\n    return eventData;\n  };\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = util.resetTime(new Date(date.getTime())).getTime();\n        dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n        if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      } else {\n        var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart : util.resetTime(appEnd).getTime() >= dateStart;\n        if (util.resetTime(appStart).getTime() <= dateStart && timeCondition || util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n    return appointmentsList;\n  };\n  YearEvent.prototype.getMonths = function () {\n    var _this = this;\n    // eslint-disable-next-line prefer-spread\n    return Array.apply(null, {\n      length: this.parent.monthsCount\n    }).map(function (value, index) {\n      return _this.parent.firstMonthOfYear + index;\n    });\n  };\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n  YearEvent.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.parent = null;\n  };\n  return YearEvent;\n}(TimelineEvent);\nexport { YearEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","append","createElement","extend","remove","isNullOrUndefined","setStyleAttribute","EventHandler","TimelineEvent","util","events","cls","EVENT_GAP","YearEvent","_super","parent","_this","call","isResource","renderAppointments","dragAndDropModule","setDragArea","fields","eventFields","elementSelector","currentView","APPOINTMENT_CLASS","APPOINTMENT_WRAPPER_CLASS","MORE_INDICATOR_CLASS","eventWrappers","slice","element","querySelectorAll","_i","eventWrappers_1","length","wrapper","renderedEvents","yearViewEvents","removeCellHeight","activeViewOptions","group","resources","uiStateValues","isGroupAdaptive","timelineResourceEvents","timelineYearViewEvents","renderTemplates","notify","contentReady","months","getMonths","months_1","month","queryString","indexOf","workCells","monthDate","Date","selectedDate","getFullYear","monthStart","calendarUtil","getMonthStartDate","getTime","monthEnd","getMonthEndDate","startDate","getWeekFirstDate","firstDayOfWeek","endDate","addDays","getWeekLastDate","index","start","resetTime","end","isMinMaxDate","filterEvents","eventBase","workCell","parseInt","toString","appendChild","className","querySelector","WORK_CELLS_CLASS","OTHERMONTH_CLASS","cellWidth","offsetWidth","cellHeader","getOuterHeight","DATE_HEADER_CLASS","eventTable","EVENT_TABLE_CLASS","eventHeight","getElementHeightFromClass","wrapperCollection","APPOINTMENT_CONTAINER_CLASS","groupIndex","undefined","row","td","eventWrapper","getMonth","dayIndex","getDay","isSpannedCollection","orientation","leftValue","rightValue","wrapper_1","eventWrapper_1","enableRtl","getDate","rowTd","cellHeight","offsetHeight","dayStart","dayEnd","resource","resourceBase","lastResourceLevel","dayEvents","sortByDateTime","_loop_1","count","eventData","this_1","updateSpannedEvents","overlapIndex","getIndex","Index","availedHeight","moreIndicatorHeight","appArea","renderedAppCount","Math","floor","moreIndicatorCount","isRendered","filter","eventObj","Guid","isSpanned","MoreIndicator","moreIndex","renderMoreIndicator","isRowAutoHeight","rowAutoHeight","renderEvent","updateCellHeight","push","isLeftRightResize","data","isLeft","isRight","isBottom","isTop","startTime","endTime","allowVirtualScrolling","renderedResources","i","len","renderResourceEvent","lastDateOfMonth","eventDatas","rowIndex","groupOrder","a","isSpannedEvent","left","right","wrap","createEventElement","width","top","offsetTop","args","cancel","type","trigger","eventRendered","eventArgs","wireAppointmentEvents","moreIndicator","getMoreIndicatorElement","rowTr","setAttribute","add","moreIndicatorClick","record","eventSubject","subject","eventSettings","default","localeObj","getConstant","attrs","id","getReadonlyAttribute","getAnnouncementString","cssClass","isReadonly","READ_ONLY","resIndex","getGroupIndexFromEvent","templateElement","eventTemplate","templateId","eventTemplateName","getAppointmentTemplate","locationEle","location","subjectEle","SUBJECT_CLASS","innerHTML","startTimeEle","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","endTimeEle","isAllDay","appointmentDetails","APPOINTMENT_DETAILS","renderResizeHandler","applyResourceColor","eventStart","eventEnd","ceil","MS_PER_DAY","minDate","maxDate","getOverlapEvents","date","appointments","appointmentsList","dateStart","dateEnd","appointments_1","app","appStart","appEnd","timeCondition","apply","monthsCount","map","value","firstMonthOfYear","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_TABLE_CLASS","CONTENT_TABLE_CLASS","rows","rows_1","firstElementChild","style","height","destroy"],"sources":["D:/xampp/htdocs/biolabs/biolabs/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/year.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n                if (!this.parent.isMinMaxDate(start)) {\n                    continue;\n                }\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[parseInt(index.toString(), 10)];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        var groupIndex = (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive) ?\n            this.parent.uiStateValues.groupIndex : undefined;\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n                    td = dayIndex + 1;\n                    var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper_1) {\n                        eventWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper_1);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n                    var moreIndicatorCount = (count - renderedAppCount) <= 0 ? 1 : (count - renderedAppCount);\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n                    if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        this_1.updateCellHeight(rowTd, availedHeight);\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = workCell.offsetWidth;\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources :\n                this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var data = eventDatas[parseInt(a.toString(), 10)];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP + this.moreIndicatorHeight;\n            var leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this.cellWidth : index * this.cellWidth;\n            if (!this.parent.isMinMaxDate(eventData[this.fields.startTime])) {\n                return;\n            }\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this.updateCellHeight(td, availedHeight);\n            }\n            else {\n                var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], { Index: overlapIndex + i }, true));\n                    }\n                }\n                break;\n            }\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.fields.startTime] = monthStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.fields.endTime] = monthEnd;\n            isSpanned.isRight = true;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n            var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n            if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                end = util.addDays(new Date(end), -1).getTime();\n            }\n            isSpanned.count = Math.ceil((end - start) / util.MS_PER_DAY) + 1;\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                if ((util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n            else {\n                var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart :\n                    util.resetTime(appEnd).getTime() >= dateStart;\n                if (((util.resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                    (util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}