{"ast":null,"code":"import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */function () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.startIndex = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n    this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n    return this.renderedLength;\n  };\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n    if (this.isHorizontalScroll) {\n      var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n      wrap.style.width = colCount * this.itemSize + 'px';\n    } else {\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    }\n    contentWrap.appendChild(wrap);\n  };\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n      wrap.style.height = renderedResCount * this.itemSize + 'px';\n    }\n  };\n  VirtualScroll.prototype.setItemSize = function () {\n    if (this.isHorizontalScroll) {\n      this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    } else {\n      this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    }\n  };\n  VirtualScroll.prototype.renderEvents = function () {\n    this.setTabIndex();\n    if (this.parent.crudModule) {\n      this.parent.crudModule.refreshProcessedData(true);\n    }\n    if (this.parent.currentView !== 'Month') {\n      this.parent.notify(events.contentReady, {});\n    }\n    this.parent.hideSpinner();\n  };\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.isHorizontalScroll) {\n      this.horizontalScrolling(conWrap);\n    } else {\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      addClass([conWrap], 'e-transition');\n      this.renderedLength = resWrap.querySelector('tbody').children.length;\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n      var resCollection = [];\n      if (conWrap.scrollTop - this.translateY < 0) {\n        resCollection = this.upScroll(conWrap, firstTDIndex);\n      } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n        resCollection = this.downScroll(conWrap, firstTDIndex);\n      }\n      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n        this.parent.showSpinner();\n        var selectedEle = this.parent.getSelectedElements();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n        window.clearTimeout(this.timeValue);\n        this.timeValue = window.setTimeout(function () {\n          _this.renderEvents();\n        }, 250);\n      }\n    }\n  };\n  VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n    var _this = this;\n    var resCollection = [];\n    var scrollWidth = this.bufferCount * this.itemSize;\n    if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n      resCollection = this.leftScroll(conWrap);\n    } else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n      resCollection = this.rightScroll(conWrap);\n    }\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      if (this.parent.resourceBase.expandedResources.length !== resCollection.length || this.parent.resourceBase.expandedResources[0] !== resCollection[0] || this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !== resCollection[resCollection.length - 1]) {\n        this.parent.showSpinner();\n        var colLevels = this.parent.activeView.colLevels.slice(0);\n        this.updateHorizontalContent(conWrap, resCollection);\n        setStyleAttribute(conWrap.querySelector('table'), {\n          transform: \"translateX(\" + this.translateY + \"px)\"\n        });\n        this.parent.activeView.colLevels = colLevels;\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n      }\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      height = height > 0 ? height : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n    return prevSetCollection;\n  };\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n  VirtualScroll.prototype.leftScroll = function (conWrap) {\n    var index = 0;\n    index = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize) - this.renderedLength;\n    index = index > 0 ? index : 0;\n    return this.getCollection(index, index + this.renderedLength);\n  };\n  VirtualScroll.prototype.rightScroll = function (conWrap) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var nextSetIndex = 0;\n    nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n    var lastIndex = nextSetIndex + this.renderedLength;\n    lastIndex = lastIndex > lastLevel.length - 1 ? lastLevel.length - 1 : lastIndex;\n    return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n  };\n  VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n    this.translateY = startIndex * this.itemSize;\n    var lastLevel = this.getResCollection(startIndex, endIndex);\n    if (this.parent.enableRtl) {\n      this.translateY = -this.translateY;\n    }\n    return lastLevel;\n  };\n  VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var resCollection = [];\n    var index = {\n      startIndex: 0,\n      endIndex: 0\n    };\n    if (this.parent.activeViewOptions.group.byDate) {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() && lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n        return this.parent.resourceBase.expandedResources;\n      }\n      resCollection = this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n      this.setRenderedDates(resCollection);\n    } else {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex && lastLevel[parseInt(endIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n        return this.parent.resourceBase.expandedResources;\n      }\n      resCollection = this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n    }\n    if (this.parent.currentView !== 'Month') {\n      this.startIndex = index.startIndex;\n      resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n    }\n    this.translateY = index.startIndex * this.itemSize;\n    return resCollection;\n  };\n  VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n      return firstItem.date.getTime() <= data.date.getTime() && data.date.getTime() <= lastItem.date.getTime();\n    });\n    this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n  VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n      return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n    });\n    this.parent.resourceBase.renderedResources = resCollection;\n    this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n  VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n    var index = 0;\n    data.filter(function (data) {\n      if (firstItem === data) {\n        colIndex.startIndex = index;\n      } else if (lastItem === data) {\n        colIndex.endIndex = index + data.colSpan;\n      }\n      index += data.colSpan;\n    });\n    if (firstItem === lastItem) {\n      colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n    }\n  };\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLength = resWrap.querySelector('tbody').children.length;\n    if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n      this.isResourceCell = true;\n      this.parent.element.focus();\n    }\n    for (var i = 0; i < renderedLength; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n  VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n    this.parent.resourceBase.expandedResources = resCollection;\n    var selectedEle = this.parent.getSelectedElements();\n    this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n    var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n    for (var i = 0; i < renderedLength; i++) {\n      remove(conWrap.querySelector('tbody tr'));\n    }\n    if (this.parent.currentView === 'Month') {\n      if (this.parent.activeViewOptions.group.byDate) {\n        this.parent.activeView.colLevels[0] = resCollection;\n      } else {\n        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n      }\n      var contentRows = this.parent.activeView.getContentRows();\n      append(contentRows, conWrap.querySelector('tbody'));\n    } else {\n      var col = [].slice.call(conWrap.querySelector('colgroup').children);\n      for (var i = 0; i < col.length; i++) {\n        remove(col[parseInt(i.toString(), 10)]);\n      }\n      this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n      var contentRows = this.parent.activeView.getContentRows();\n      var table = conWrap.querySelector('table');\n      var thead = conWrap.querySelector('thead');\n      var colGroupEle_1 = conWrap.querySelector('colgroup');\n      resCollection.forEach(function () {\n        colGroupEle_1.appendChild(createElement('col'));\n      });\n      thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n      }\n      prepend([thead], table);\n      append(contentRows, conWrap.querySelector('tbody'));\n    }\n  };\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n      this.focusedEle = null;\n    }\n  };\n  VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n    if (this.parent.currentView !== 'Month') {\n      var dateCol_1 = resCollection.map(function (x) {\n        return x.date;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = dateCol_1;\n      });\n    } else {\n      var dateCol_2 = resCollection.map(function (x) {\n        return x.date.getDay();\n      });\n      var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) {\n        return dateCol_2.indexOf(x.getDay()) >= 0;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = renderDates_1;\n      });\n    }\n  };\n  VirtualScroll.prototype.setTabIndex = function () {\n    var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n    if (resCells && resColWrap) {\n      resCells.forEach(function (element) {\n        if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n          element.setAttribute('tabindex', '0');\n        }\n      });\n    }\n    var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n    if (this.isResourceCell && focusResCell) {\n      focusResCell.focus();\n      this.isResourceCell = false;\n    }\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n    this.focusedEle = null;\n  };\n  return VirtualScroll;\n}();\nexport { VirtualScroll };","map":{"version":3,"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","prepend","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","startIndex","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","containerSize","isHorizontalScroll","element","clientWidth","clientHeight","Math","ceil","renderVirtualTrack","contentWrap","wrap","className","VIRTUAL_TRACK_CLASS","colCount","activeView","colLevels","length","style","width","height","resourceBase","expandedResources","appendChild","updateVirtualScrollHeight","virtual","querySelector","lastResourceIndex","groupIndex","lastRenderIndex","renderedResources","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","updateVirtualTrackHeight","resourceCount","resWrap","RESOURCE_COLUMN_WRAP_CLASS","conWrap","CONTENT_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","setTranslate","lastCollIndex","renderedResCount","getElementWidthFromClass","WORK_CELLS_CLASS","getElementHeightFromClass","renderEvents","setTabIndex","crudModule","refreshProcessedData","currentView","notify","contentReady","hideSpinner","_this","quickPopup","quickPopupHide","morePopup","hide","horizontalScrolling","timeIndicator","CURRENT_TIMELINE_CLASS","firstTDIndex","parseInt","getAttribute","scrollHeight","rowAutoHeight","resCollection","scrollTop","upScroll","downScroll","showSpinner","selectedEle","getSelectedElements","focusedEle","updateContent","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","scrollWidth","abs","scrollLeft","leftScroll","rightScroll","slice","updateHorizontalContent","transform","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","getCollection","lastLevel","nextSetIndex","endIndex","getResCollection","enableRtl","activeViewOptions","group","byDate","toString","date","getTime","getByDateCollection","setRenderedDates","getByIdCollection","firstItem","lastItem","filter","data","setStartEndIndex","lastResourceLevel","colIndex","colSpan","document","activeElement","classList","contains","RESOURCE_CELLS_CLASS","isResourceCell","focus","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","querySelectorAll","col","call","table","thead","colGroupEle_1","forEach","eventBase","createEventWrapper","timeScale","enable","updateFocusedWorkCell","ele","addSelectedClass","dateCol_1","map","x","renderDates","dateCol_2","getDay","renderDates_1","indexOf","resColWrap","resCells","getBoundingClientRect","top","setAttribute","focusResCell","destroy"],"sources":["D:/xampp/htdocs/biolabs/biolabs/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"sourcesContent":["import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n        this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n        return this.renderedLength;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        if (this.isHorizontalScroll) {\n            var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n            wrap.style.width = (colCount * this.itemSize) + 'px';\n        }\n        else {\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        }\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        if (this.isHorizontalScroll) {\n            this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n        else {\n            this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        if (this.parent.crudModule) {\n            this.parent.crudModule.refreshProcessedData(true);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.parent.notify(events.contentReady, {});\n        }\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.isHorizontalScroll) {\n            this.horizontalScrolling(conWrap);\n        }\n        else {\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            addClass([conWrap], 'e-transition');\n            this.renderedLength = resWrap.querySelector('tbody').children.length;\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var scrollHeight = this.parent.rowAutoHeight ?\n                (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n            var resCollection = [];\n            if ((conWrap.scrollTop) - this.translateY < 0) {\n                resCollection = this.upScroll(conWrap, firstTDIndex);\n            }\n            else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n                resCollection = this.downScroll(conWrap, firstTDIndex);\n            }\n            if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n                this.parent.showSpinner();\n                var selectedEle = this.parent.getSelectedElements();\n                this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n                this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n                this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n                window.clearTimeout(this.timeValue);\n                this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n            }\n        }\n    };\n    VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n        var _this = this;\n        var resCollection = [];\n        var scrollWidth = this.bufferCount * this.itemSize;\n        if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n            resCollection = this.leftScroll(conWrap);\n        }\n        else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n            resCollection = this.rightScroll(conWrap);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            if (this.parent.resourceBase.expandedResources.length !== resCollection.length ||\n                this.parent.resourceBase.expandedResources[0] !== resCollection[0] ||\n                this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !==\n                    resCollection[resCollection.length - 1]) {\n                this.parent.showSpinner();\n                var colLevels = this.parent.activeView.colLevels.slice(0);\n                this.updateHorizontalContent(conWrap, resCollection);\n                setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateX(\" + this.translateY + \"px)\" });\n                this.parent.activeView.colLevels = colLevels;\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.leftScroll = function (conWrap) {\n        var index = 0;\n        index = (~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize)) - this.renderedLength;\n        index = (index > 0) ? index : 0;\n        return this.getCollection(index, index + this.renderedLength);\n    };\n    VirtualScroll.prototype.rightScroll = function (conWrap) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var nextSetIndex = 0;\n        nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n        var lastIndex = nextSetIndex + this.renderedLength;\n        lastIndex = (lastIndex > lastLevel.length - 1) ? lastLevel.length - 1 : lastIndex;\n        return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n    };\n    VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n        this.translateY = startIndex * this.itemSize;\n        var lastLevel = this.getResCollection(startIndex, endIndex);\n        if (this.parent.enableRtl) {\n            this.translateY = -this.translateY;\n        }\n        return lastLevel;\n    };\n    VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var resCollection = [];\n        var index = { startIndex: 0, endIndex: 0 };\n        if (this.parent.activeViewOptions.group.byDate) {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() ===\n                this.parent.resourceBase.expandedResources[0].date.getTime() &&\n                lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n            this.setRenderedDates(resCollection);\n        }\n        else {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex &&\n                lastLevel[parseInt(endIndex.toString(), 10)].groupIndex ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.startIndex = index.startIndex;\n            resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n        }\n        this.translateY = index.startIndex * this.itemSize;\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n            return firstItem.date.getTime() <= data.date.getTime() &&\n                data.date.getTime() <= lastItem.date.getTime();\n        });\n        this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n            return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n        });\n        this.parent.resourceBase.renderedResources = resCollection;\n        this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n        var index = 0;\n        data.filter(function (data) {\n            if (firstItem === data) {\n                colIndex.startIndex = index;\n            }\n            else if (lastItem === data) {\n                colIndex.endIndex = index + data.colSpan;\n            }\n            index += data.colSpan;\n        });\n        if (firstItem === lastItem) {\n            colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n        }\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n        this.parent.resourceBase.expandedResources = resCollection;\n        var selectedEle = this.parent.getSelectedElements();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n        for (var i = 0; i < renderedLength; i++) {\n            remove(conWrap.querySelector('tbody tr'));\n        }\n        if (this.parent.currentView === 'Month') {\n            if (this.parent.activeViewOptions.group.byDate) {\n                this.parent.activeView.colLevels[0] = resCollection;\n            }\n            else {\n                this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n            }\n            var contentRows = this.parent.activeView.getContentRows();\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n        else {\n            var col = [].slice.call(conWrap.querySelector('colgroup').children);\n            for (var i = 0; i < col.length; i++) {\n                remove(col[parseInt(i.toString(), 10)]);\n            }\n            this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n            var contentRows = this.parent.activeView.getContentRows();\n            var table = conWrap.querySelector('table');\n            var thead = conWrap.querySelector('thead');\n            var colGroupEle_1 = conWrap.querySelector('colgroup');\n            resCollection.forEach(function () {\n                colGroupEle_1.appendChild(createElement('col'));\n            });\n            thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n            }\n            prepend([thead], table);\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n        if (this.parent.currentView !== 'Month') {\n            var dateCol_1 = resCollection.map(function (x) { return x.date; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = dateCol_1; });\n        }\n        else {\n            var dateCol_2 = resCollection.map(function (x) { return x.date.getDay(); });\n            var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) { return dateCol_2.indexOf(x.getDay()) >= 0; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = renderDates_1; });\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n        this.focusedEle = null;\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,OAAO,QAAQ,sBAAsB;AAC7H,OAAO,KAAKC,MAAM,MAAM,kBAAkB;AAC1C,OAAO,KAAKC,GAAG,MAAM,sBAAsB;AAC3C,OAAO,KAAKC,IAAI,MAAM,cAAc;AACpC;AACA;AACA;AACA,IAAIC,aAAa,GAAG,aAAe,YAAY;EAC3C,SAASA,aAAa,CAACC,MAAM,EAAE;IAC3B,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,gBAAgB,GAAG,CAAC;IACzB,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACN,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACO,gBAAgB,EAAE;EAC3B;EACAR,aAAa,CAACS,SAAS,CAACD,gBAAgB,GAAG,YAAY;IACnD,IAAI,CAAC,IAAI,CAACP,MAAM,IAAI,IAAI,CAACA,MAAM,IAAI,IAAI,CAACA,MAAM,CAACS,WAAW,EAAE;MACxD;IACJ;IACA,IAAI,CAACT,MAAM,CAACU,EAAE,CAACd,MAAM,CAACe,aAAa,EAAE,IAAI,CAACC,gBAAgB,EAAE,IAAI,CAAC;EACrE,CAAC;EACDb,aAAa,CAACS,SAAS,CAACK,mBAAmB,GAAG,YAAY;IACtD,IAAI,CAAC,IAAI,CAACb,MAAM,IAAI,IAAI,CAACA,MAAM,IAAI,IAAI,CAACA,MAAM,CAACS,WAAW,EAAE;MACxD;IACJ;IACA,IAAI,CAACT,MAAM,CAACc,GAAG,CAAClB,MAAM,CAACe,aAAa,EAAE,IAAI,CAACC,gBAAgB,CAAC;EAChE,CAAC;EACDb,aAAa,CAACS,SAAS,CAACO,gBAAgB,GAAG,YAAY;IACnD,IAAI,CAACC,WAAW,EAAE;IAClB,IAAIC,aAAa,GAAG,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAAClB,MAAM,CAACmB,OAAO,CAACC,WAAW,GAAG,IAAI,CAACpB,MAAM,CAACmB,OAAO,CAACE,YAAY;IAChH,IAAI,CAACjB,cAAc,GAAGkB,IAAI,CAACC,IAAI,CAACN,aAAa,GAAG,IAAI,CAACf,QAAQ,CAAC,GAAG,IAAI,CAACC,WAAW;IACjF,OAAO,IAAI,CAACC,cAAc;EAC9B,CAAC;EACDL,aAAa,CAACS,SAAS,CAACgB,kBAAkB,GAAG,UAAUC,WAAW,EAAE;IAChE,IAAIC,IAAI,GAAGhC,aAAa,CAAC,KAAK,EAAE;MAAEiC,SAAS,EAAE9B,GAAG,CAAC+B;IAAoB,CAAC,CAAC;IACvE,IAAI,IAAI,CAACV,kBAAkB,EAAE;MACzB,IAAIW,QAAQ,GAAG,IAAI,CAAC7B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,IAAI,CAAC/B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM;MACnGN,IAAI,CAACO,KAAK,CAACC,KAAK,GAAIL,QAAQ,GAAG,IAAI,CAAC3B,QAAQ,GAAI,IAAI;IACxD,CAAC,MACI;MACDwB,IAAI,CAACO,KAAK,CAACE,MAAM,GAAI,IAAI,CAACnC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,IAAI,CAAC9B,QAAQ,GAAI,IAAI;IAClG;IACAuB,WAAW,CAACa,WAAW,CAACZ,IAAI,CAAC;EACjC,CAAC;EACD3B,aAAa,CAACS,SAAS,CAAC+B,yBAAyB,GAAG,YAAY;IAC5D,IAAIC,OAAO,GAAG,IAAI,CAACxC,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAAC+B,mBAAmB,CAAC;IAC9E,IAAIc,iBAAiB,GAAG,IAAI,CAAC1C,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,CAAC,CAAC,CAACW,UAAU;IACpI,IAAIC,eAAe,GAAG,IAAI,CAAC5C,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAAC,IAAI,CAAC7C,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAACb,MAAM,GAAG,CAAC,CAAC,CAACW,UAAU;IAClI,IAAIC,eAAe,KAAKF,iBAAiB,EAAE;MACvC,IAAII,QAAQ,GAAG,IAAI,CAAC9C,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACkD,mBAAmB,CAAC;MAC/E,IAAI,CAAC3C,cAAc,GAAG0C,QAAQ,CAACL,aAAa,CAAC,OAAO,CAAC,CAACO,QAAQ,CAAChB,MAAM;MACrEQ,OAAO,CAACP,KAAK,CAACE,MAAM,GAAIW,QAAQ,CAACG,YAAY,GAAG,CAAC,IAAI,CAACjD,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAI,IAAI,CAAC5B,cAAe,IACtH0C,QAAQ,CAACG,YAAY,GAAG,IAAI,CAAC7C,cAAc,GAAI,IAAI;IAC3D,CAAC,MACI;MACDoC,OAAO,CAACP,KAAK,CAACE,MAAM,GAAG,EAAE;IAC7B;IACA,IAAI,CAAC9B,gBAAgB,GAAGmC,OAAO,CAACS,YAAY,GAAG,IAAI,CAACjD,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM;EACpG,CAAC;EACDjC,aAAa,CAACS,SAAS,CAAC0C,wBAAwB,GAAG,UAAUxB,IAAI,EAAE;IAC/D,IAAIyB,aAAa,GAAG,IAAI,CAACnD,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAACb,MAAM;IACrE,IAAImB,aAAa,KAAK,IAAI,CAACpC,gBAAgB,EAAE,EAAE;MAC3CW,IAAI,CAACO,KAAK,CAACE,MAAM,GAAG,IAAI,CAACnC,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,iBAAiB,CAAC,CAACpB,YAAY,GAAG,IAAI;MAC5F,IAAI+B,OAAO,GAAG,IAAI,CAACpD,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACwD,0BAA0B,CAAC;MACrF,IAAIC,OAAO,GAAG,IAAI,CAACtD,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAAC0D,kBAAkB,CAAC;MAC7E,IAAIC,SAAS,GAAG,IAAI,CAACxD,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAAC4D,iBAAiB,CAAC;MAC9E,IAAI,CAACxD,UAAU,GAAG,CAAC;MACnB,IAAI,CAACyD,YAAY,CAACN,OAAO,EAAEE,OAAO,EAAEE,SAAS,CAAC;IAClD,CAAC,MACI;MACD,IAAIZ,eAAe,GAAG,IAAI,CAAC5C,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAACM,aAAa,GAAG,CAAC,CAAC,CAACR,UAAU;MAC9F,IAAIgB,aAAa,GAAG,IAAI,CAAC3D,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,CAAC,CAAC,CAACW,UAAU;MAChI,IAAIiB,gBAAgB,GAAGT,aAAa,IAAIQ,aAAa,GAAGf,eAAe,CAAC;MACxEgB,gBAAgB,GAAIA,gBAAgB,GAAG,IAAI,CAAC5D,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GACpF,IAAI,CAAChC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG4B,gBAAgB;MACxElC,IAAI,CAACO,KAAK,CAACE,MAAM,GAAIyB,gBAAgB,GAAG,IAAI,CAAC1D,QAAQ,GAAI,IAAI;IACjE;EACJ,CAAC;EACDH,aAAa,CAACS,SAAS,CAACQ,WAAW,GAAG,YAAY;IAC9C,IAAI,IAAI,CAACE,kBAAkB,EAAE;MACzB,IAAI,CAAChB,QAAQ,GAAGJ,IAAI,CAAC+D,wBAAwB,CAAC,IAAI,CAAC7D,MAAM,CAAC8B,UAAU,CAACX,OAAO,EAAEtB,GAAG,CAACiE,gBAAgB,CAAC,IAAI,IAAI,CAAC5D,QAAQ;IACxH,CAAC,MACI;MACD,IAAI,CAACA,QAAQ,GAAGJ,IAAI,CAACiE,yBAAyB,CAAC,IAAI,CAAC/D,MAAM,CAAC8B,UAAU,CAACX,OAAO,EAAEtB,GAAG,CAACiE,gBAAgB,CAAC,IAAI,IAAI,CAAC5D,QAAQ;IACzH;EACJ,CAAC;EACDH,aAAa,CAACS,SAAS,CAACwD,YAAY,GAAG,YAAY;IAC/C,IAAI,CAACC,WAAW,EAAE;IAClB,IAAI,IAAI,CAACjE,MAAM,CAACkE,UAAU,EAAE;MACxB,IAAI,CAAClE,MAAM,CAACkE,UAAU,CAACC,oBAAoB,CAAC,IAAI,CAAC;IACrD;IACA,IAAI,IAAI,CAACnE,MAAM,CAACoE,WAAW,KAAK,OAAO,EAAE;MACrC,IAAI,CAACpE,MAAM,CAACqE,MAAM,CAACzE,MAAM,CAAC0E,YAAY,EAAE,CAAC,CAAC,CAAC;IAC/C;IACA,IAAI,CAACtE,MAAM,CAACuE,WAAW,EAAE;EAC7B,CAAC;EACDxE,aAAa,CAACS,SAAS,CAACI,gBAAgB,GAAG,YAAY;IACnD,IAAI4D,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAACxE,MAAM,CAACyE,UAAU,EAAE;MACxB,IAAI,CAACzE,MAAM,CAACyE,UAAU,CAACC,cAAc,EAAE;MACvC,IAAI,CAAC1E,MAAM,CAACyE,UAAU,CAACE,SAAS,CAACC,IAAI,EAAE;IAC3C;IACA,IAAItB,OAAO,GAAG,IAAI,CAACtD,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAAC0D,kBAAkB,CAAC;IAC7E,IAAI,IAAI,CAACrC,kBAAkB,EAAE;MACzB,IAAI,CAAC2D,mBAAmB,CAACvB,OAAO,CAAC;IACrC,CAAC,MACI;MACD,IAAIF,OAAO,GAAG,IAAI,CAACpD,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACwD,0BAA0B,CAAC;MACrF,IAAIG,SAAS,GAAG,IAAI,CAACxD,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAAC4D,iBAAiB,CAAC;MAC9E,IAAIqB,aAAa,GAAG,IAAI,CAAC9E,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACkF,sBAAsB,CAAC;MACvF,IAAIjC,QAAQ,GAAG,IAAI,CAAC9C,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACkD,mBAAmB,CAAC;MAC/EzD,QAAQ,CAAC,CAACgE,OAAO,CAAC,EAAE,cAAc,CAAC;MACnC,IAAI,CAAClD,cAAc,GAAGgD,OAAO,CAACX,aAAa,CAAC,OAAO,CAAC,CAACO,QAAQ,CAAChB,MAAM;MACpE,IAAIgD,YAAY,GAAGC,QAAQ,CAAC7B,OAAO,CAACX,aAAa,CAAC,UAAU,CAAC,CAACyC,YAAY,CAAC,kBAAkB,CAAC,EAAE,EAAE,CAAC;MACnG,IAAIC,YAAY,GAAG,IAAI,CAACnF,MAAM,CAACoF,aAAa,GACvCtC,QAAQ,CAACG,YAAY,GAAGK,OAAO,CAACL,YAAY,GAAI,IAAI,CAAC9C,WAAW,GAAG,IAAI,CAACD,QAAQ;MACrF,IAAImF,aAAa,GAAG,EAAE;MACtB,IAAK/B,OAAO,CAACgC,SAAS,GAAI,IAAI,CAACrF,UAAU,GAAG,CAAC,EAAE;QAC3CoF,aAAa,GAAG,IAAI,CAACE,QAAQ,CAACjC,OAAO,EAAE0B,YAAY,CAAC;MACxD,CAAC,MACI,IAAI1B,OAAO,CAACgC,SAAS,GAAG,IAAI,CAACrF,UAAU,GAAGkF,YAAY,EAAE;QACzDE,aAAa,GAAG,IAAI,CAACG,UAAU,CAAClC,OAAO,EAAE0B,YAAY,CAAC;MAC1D;MACA,IAAI,CAACxF,iBAAiB,CAAC6F,aAAa,CAAC,IAAIA,aAAa,CAACrD,MAAM,GAAG,CAAC,EAAE;QAC/D,IAAI,CAAChC,MAAM,CAACyF,WAAW,EAAE;QACzB,IAAIC,WAAW,GAAG,IAAI,CAAC1F,MAAM,CAAC2F,mBAAmB,EAAE;QACnD,IAAI,CAACC,UAAU,GAAGF,WAAW,CAACA,WAAW,CAAC1D,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC4D,UAAU;QACxE,IAAI,CAACC,aAAa,CAACzC,OAAO,EAAEE,OAAO,EAAEE,SAAS,EAAE6B,aAAa,CAAC;QAC9D,IAAI,CAAC3B,YAAY,CAACN,OAAO,EAAEE,OAAO,EAAEE,SAAS,EAAEsB,aAAa,CAAC;QAC7D,IAAI,IAAI,CAAC9E,MAAM,CAAC8F,iBAAiB,IAAI,IAAI,CAAC9F,MAAM,CAAC8F,iBAAiB,CAACC,SAAS,CAACC,MAAM,KAAK,MAAM,EAAE;UAC5F,IAAI,CAAChG,MAAM,CAAC8F,iBAAiB,CAACG,iBAAiB,EAAE;QACrD;QACAC,MAAM,CAACC,YAAY,CAAC,IAAI,CAACC,SAAS,CAAC;QACnC,IAAI,CAACA,SAAS,GAAGF,MAAM,CAACG,UAAU,CAAC,YAAY;UAAE7B,KAAK,CAACR,YAAY,EAAE;QAAE,CAAC,EAAE,GAAG,CAAC;MAClF;IACJ;EACJ,CAAC;EACDjE,aAAa,CAACS,SAAS,CAACqE,mBAAmB,GAAG,UAAUvB,OAAO,EAAE;IAC7D,IAAIkB,KAAK,GAAG,IAAI;IAChB,IAAIa,aAAa,GAAG,EAAE;IACtB,IAAIiB,WAAW,GAAG,IAAI,CAACnG,WAAW,GAAG,IAAI,CAACD,QAAQ;IAClD,IAAIoB,IAAI,CAACiF,GAAG,CAACjD,OAAO,CAACkD,UAAU,CAAC,GAAGlF,IAAI,CAACiF,GAAG,CAAC,IAAI,CAACtG,UAAU,CAAC,GAAG,CAAC,EAAE;MAC9DoF,aAAa,GAAG,IAAI,CAACoB,UAAU,CAACnD,OAAO,CAAC;IAC5C,CAAC,MACI,IAAIhC,IAAI,CAACiF,GAAG,CAACjD,OAAO,CAACkD,UAAU,CAAC,GAAGlF,IAAI,CAACiF,GAAG,CAAC,IAAI,CAACtG,UAAU,CAAC,GAAGqG,WAAW,EAAE;MAC7EjB,aAAa,GAAG,IAAI,CAACqB,WAAW,CAACpD,OAAO,CAAC;IAC7C;IACA,IAAI,CAAC9D,iBAAiB,CAAC6F,aAAa,CAAC,IAAIA,aAAa,CAACrD,MAAM,GAAG,CAAC,EAAE;MAC/D,IAAI,IAAI,CAAChC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,KAAKqD,aAAa,CAACrD,MAAM,IAC1E,IAAI,CAAChC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,CAAC,CAAC,KAAKgD,aAAa,CAAC,CAAC,CAAC,IAClE,IAAI,CAACrF,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,CAAC,CAAC,KAC7FqD,aAAa,CAACA,aAAa,CAACrD,MAAM,GAAG,CAAC,CAAC,EAAE;QAC7C,IAAI,CAAChC,MAAM,CAACyF,WAAW,EAAE;QACzB,IAAI1D,SAAS,GAAG,IAAI,CAAC/B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC4E,KAAK,CAAC,CAAC,CAAC;QACzD,IAAI,CAACC,uBAAuB,CAACtD,OAAO,EAAE+B,aAAa,CAAC;QACpD5F,iBAAiB,CAAC6D,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC,EAAE;UAAEoE,SAAS,EAAE,aAAa,GAAG,IAAI,CAAC5G,UAAU,GAAG;QAAM,CAAC,CAAC;QACzG,IAAI,CAACD,MAAM,CAAC8B,UAAU,CAACC,SAAS,GAAGA,SAAS;QAC5C,IAAI,IAAI,CAAC/B,MAAM,CAAC8F,iBAAiB,IAAI,IAAI,CAAC9F,MAAM,CAAC8F,iBAAiB,CAACC,SAAS,CAACC,MAAM,KAAK,MAAM,EAAE;UAC5F,IAAI,CAAChG,MAAM,CAAC8F,iBAAiB,CAACG,iBAAiB,EAAE;QACrD;MACJ;MACAC,MAAM,CAACC,YAAY,CAAC,IAAI,CAACC,SAAS,CAAC;MACnC,IAAI,CAACA,SAAS,GAAGF,MAAM,CAACG,UAAU,CAAC,YAAY;QAAE7B,KAAK,CAACR,YAAY,EAAE;MAAE,CAAC,EAAE,GAAG,CAAC;IAClF;EACJ,CAAC;EACDjE,aAAa,CAACS,SAAS,CAAC+E,QAAQ,GAAG,UAAUjC,OAAO,EAAE0B,YAAY,EAAE;IAChE,IAAI8B,KAAK,GAAG,CAAC;IACbA,KAAK,GAAI,CAAC,EAAExD,OAAO,CAACgC,SAAS,GAAG,IAAI,CAACpF,QAAQ,CAAC,GAAGoB,IAAI,CAACC,IAAI,CAAC+B,OAAO,CAACjC,YAAY,GAAG,IAAI,CAACnB,QAAQ,CAAC,GAAI,IAAI,CAACE,cAAc;IACvH,IAAI,IAAI,CAACJ,MAAM,CAACoF,aAAa,EAAE;MAC3B0B,KAAK,GAAIA,KAAK,GAAG9B,YAAY,GAAIA,YAAY,GAAG,IAAI,CAAC7E,WAAW,GAAG2G,KAAK;IAC5E;IACAA,KAAK,GAAIA,KAAK,GAAG,CAAC,GAAIA,KAAK,GAAG,CAAC;IAC/B,IAAIC,iBAAiB,GAAG,IAAI,CAACC,mBAAmB,CAACF,KAAK,EAAEA,KAAK,GAAG,IAAI,CAAC1G,cAAc,CAAC;IACpF,IAAI,CAACJ,MAAM,CAACoC,YAAY,CAACS,iBAAiB,GAAGkE,iBAAiB;IAC9D,IAAI/B,YAAY,KAAK,CAAC,EAAE;MACpB,IAAI,CAAC/E,UAAU,GAAGqD,OAAO,CAACgC,SAAS;IACvC,CAAC,MACI;MACD,IAAInD,MAAM,GAAI,IAAI,CAACnC,MAAM,CAACoF,aAAa,GAAI,IAAI,CAAC/E,gBAAgB,GAAG,IAAI,CAACH,QAAQ;MAChFiC,MAAM,GAAIA,MAAM,GAAG,CAAC,GAAIA,MAAM,GAAG,IAAI,CAACjC,QAAQ;MAC9C,IAAI,CAACD,UAAU,GAAIqD,OAAO,CAACgC,SAAS,GAAI,IAAI,CAACnF,WAAW,GAAGgC,MAAO,GAAG,CAAC,GAClEmB,OAAO,CAACgC,SAAS,GAAI,IAAI,CAACnF,WAAW,GAAGgC,MAAO,GAAG,CAAC;IAC3D;IACA,OAAO4E,iBAAiB;EAC5B,CAAC;EACDhH,aAAa,CAACS,SAAS,CAACgF,UAAU,GAAG,UAAUlC,OAAO,EAAE0B,YAAY,EAAE;IAClE,IAAIiC,YAAY,GAAG,IAAI,CAACjH,MAAM,CAACoC,YAAY,CACvCS,iBAAiB,CAAC,IAAI,CAAC7C,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAACb,MAAM,GAAG,CAAC,CAAC,CAACW,UAAU;IACvF,IAAID,iBAAiB,GAAG,IAAI,CAAC1C,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,CAAC,CAAC,CAACW,UAAU;IACpI,IAAIsE,YAAY,KAAKvE,iBAAiB,EAAE;MACpC,OAAO,IAAI;IACf;IACA,IAAIwE,eAAe,GAAG,CAAC;IACvBA,eAAe,GAAG,CAAC,EAAE5D,OAAO,CAACgC,SAAS,GAAG,IAAI,CAACpF,QAAQ,CAAC;IACvD,IAAI,IAAI,CAACF,MAAM,CAACoF,aAAa,EAAE;MAC3B8B,eAAe,GAAG,CAAC,EAAE,CAAC5D,OAAO,CAACgC,SAAS,GAAG,IAAI,CAACrF,UAAU,IAAI,IAAI,CAACI,gBAAgB,CAAC,GAAG2E,YAAY;MAClGkC,eAAe,GAAIA,eAAe,GAAGlC,YAAY,GAAG,IAAI,CAAC7E,WAAW,GAAI+G,eAAe,GAAGlC,YAAY,GAAG,IAAI,CAAC7E,WAAW;IAC7H;IACA,IAAIgH,SAAS,GAAGD,eAAe,GAAG,IAAI,CAAC9G,cAAc;IACrD+G,SAAS,GAAIA,SAAS,GAAG,IAAI,CAACnH,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GACtEkF,eAAe,IAAI,IAAI,CAAClH,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAGkF,eAAe,CAAC,GAAGC,SAAS;IACvG,IAAIC,iBAAiB,GAAG,IAAI,CAACJ,mBAAmB,CAACG,SAAS,GAAG,IAAI,CAAC/G,cAAc,EAAE+G,SAAS,CAAC;IAC5F,IAAI,CAAClH,UAAU,GAAGqD,OAAO,CAACgC,SAAS;IACnC,OAAO8B,iBAAiB;EAC5B,CAAC;EACDrH,aAAa,CAACS,SAAS,CAACiG,UAAU,GAAG,UAAUnD,OAAO,EAAE;IACpD,IAAIwD,KAAK,GAAG,CAAC;IACbA,KAAK,GAAI,CAAC,EAAExF,IAAI,CAACiF,GAAG,CAACjD,OAAO,CAACkD,UAAU,CAAC,GAAG,IAAI,CAACtG,QAAQ,CAAC,GAAGoB,IAAI,CAACC,IAAI,CAAC+B,OAAO,CAAClC,WAAW,GAAG,IAAI,CAAClB,QAAQ,CAAC,GAAI,IAAI,CAACE,cAAc;IACjI0G,KAAK,GAAIA,KAAK,GAAG,CAAC,GAAIA,KAAK,GAAG,CAAC;IAC/B,OAAO,IAAI,CAACO,aAAa,CAACP,KAAK,EAAEA,KAAK,GAAG,IAAI,CAAC1G,cAAc,CAAC;EACjE,CAAC;EACDL,aAAa,CAACS,SAAS,CAACkG,WAAW,GAAG,UAAUpD,OAAO,EAAE;IACrD,IAAIgE,SAAS,GAAG,IAAI,CAACtH,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,IAAI,CAAC/B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC;IAC7F,IAAIuF,YAAY,GAAG,CAAC;IACpBA,YAAY,GAAG,CAAC,EAAEjG,IAAI,CAACiF,GAAG,CAACjD,OAAO,CAACkD,UAAU,CAAC,GAAG,IAAI,CAACtG,QAAQ,CAAC;IAC/D,IAAIiH,SAAS,GAAGI,YAAY,GAAG,IAAI,CAACnH,cAAc;IAClD+G,SAAS,GAAIA,SAAS,GAAGG,SAAS,CAACtF,MAAM,GAAG,CAAC,GAAIsF,SAAS,CAACtF,MAAM,GAAG,CAAC,GAAGmF,SAAS;IACjF,OAAO,IAAI,CAACE,aAAa,CAACF,SAAS,GAAG,IAAI,CAAC/G,cAAc,EAAE+G,SAAS,CAAC;EACzE,CAAC;EACDpH,aAAa,CAACS,SAAS,CAAC6G,aAAa,GAAG,UAAU/G,UAAU,EAAEkH,QAAQ,EAAE;IACpE,IAAI,CAACvH,UAAU,GAAGK,UAAU,GAAG,IAAI,CAACJ,QAAQ;IAC5C,IAAIoH,SAAS,GAAG,IAAI,CAACG,gBAAgB,CAACnH,UAAU,EAAEkH,QAAQ,CAAC;IAC3D,IAAI,IAAI,CAACxH,MAAM,CAAC0H,SAAS,EAAE;MACvB,IAAI,CAACzH,UAAU,GAAG,CAAC,IAAI,CAACA,UAAU;IACtC;IACA,OAAOqH,SAAS;EACpB,CAAC;EACDvH,aAAa,CAACS,SAAS,CAACiH,gBAAgB,GAAG,UAAUnH,UAAU,EAAEkH,QAAQ,EAAE;IACvE,IAAIF,SAAS,GAAG,IAAI,CAACtH,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,IAAI,CAAC/B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC;IAC7F,IAAIqD,aAAa,GAAG,EAAE;IACtB,IAAIyB,KAAK,GAAG;MAAExG,UAAU,EAAE,CAAC;MAAEkH,QAAQ,EAAE;IAAE,CAAC;IAC1C,IAAI,IAAI,CAACxH,MAAM,CAAC2H,iBAAiB,CAACC,KAAK,CAACC,MAAM,EAAE;MAC5C,IAAIP,SAAS,CAACrC,QAAQ,CAAC3E,UAAU,CAACwH,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAACC,IAAI,CAACC,OAAO,EAAE,KAC7D,IAAI,CAAChI,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,CAAC,CAAC,CAAC0F,IAAI,CAACC,OAAO,EAAE,IAC5DV,SAAS,CAACrC,QAAQ,CAACuC,QAAQ,CAACM,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAACC,IAAI,CAACC,OAAO,EAAE,KACvD,IAAI,CAAChI,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,CAAC,CAAC,CAAC+F,IAAI,CAACC,OAAO,EAAE,EAAE;QACtH,OAAO,IAAI,CAAChI,MAAM,CAACoC,YAAY,CAACC,iBAAiB;MACrD;MACAgD,aAAa,GACT,IAAI,CAAC4C,mBAAmB,CAACX,SAAS,CAACrC,QAAQ,CAAC3E,UAAU,CAACwH,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,EAAER,SAAS,CAACrC,QAAQ,CAACuC,QAAQ,CAACM,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,EAAEhB,KAAK,CAAC;MACjI,IAAI,CAACoB,gBAAgB,CAAC7C,aAAa,CAAC;IACxC,CAAC,MACI;MACD,IAAIiC,SAAS,CAACrC,QAAQ,CAAC3E,UAAU,CAACwH,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAACnF,UAAU,KAAK,IAAI,CAAC3C,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,CAAC,CAAC,CAACM,UAAU,IACtH2E,SAAS,CAACrC,QAAQ,CAACuC,QAAQ,CAACM,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAACnF,UAAU,KACnD,IAAI,CAAC3C,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAAC,IAAI,CAACrC,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACL,MAAM,GAAG,CAAC,CAAC,CAACW,UAAU,EAAE;QAClH,OAAO,IAAI,CAAC3C,MAAM,CAACoC,YAAY,CAACC,iBAAiB;MACrD;MACAgD,aAAa,GACT,IAAI,CAAC8C,iBAAiB,CAACb,SAAS,CAACrC,QAAQ,CAAC3E,UAAU,CAACwH,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,EAAER,SAAS,CAACrC,QAAQ,CAACuC,QAAQ,CAACM,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,EAAEhB,KAAK,CAAC;IACnI;IACA,IAAI,IAAI,CAAC9G,MAAM,CAACoE,WAAW,KAAK,OAAO,EAAE;MACrC,IAAI,CAAC9D,UAAU,GAAGwG,KAAK,CAACxG,UAAU;MAClC+E,aAAa,GAAGiC,SAAS,CAACX,KAAK,CAACG,KAAK,CAACxG,UAAU,EAAEwG,KAAK,CAACU,QAAQ,CAAC;IACrE;IACA,IAAI,CAACvH,UAAU,GAAG6G,KAAK,CAACxG,UAAU,GAAG,IAAI,CAACJ,QAAQ;IAClD,OAAOmF,aAAa;EACxB,CAAC;EACDtF,aAAa,CAACS,SAAS,CAACyH,mBAAmB,GAAG,UAAUG,SAAS,EAAEC,QAAQ,EAAEvB,KAAK,EAAE;IAChF,IAAIzB,aAAa,GAAG,IAAI,CAACrF,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,CAAC,CAAC,CAACuG,MAAM,CAAC,UAAUC,IAAI,EAAE;MAC3E,OAAOH,SAAS,CAACL,IAAI,CAACC,OAAO,EAAE,IAAIO,IAAI,CAACR,IAAI,CAACC,OAAO,EAAE,IAClDO,IAAI,CAACR,IAAI,CAACC,OAAO,EAAE,IAAIK,QAAQ,CAACN,IAAI,CAACC,OAAO,EAAE;IACtD,CAAC,CAAC;IACF,IAAI,CAACQ,gBAAgB,CAAC,IAAI,CAACxI,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,CAAC,CAAC,EAAEsD,aAAa,CAAC,CAAC,CAAC,EAAEA,aAAa,CAACA,aAAa,CAACrD,MAAM,GAAG,CAAC,CAAC,EAAE8E,KAAK,CAAC;IAC5H,OAAOzB,aAAa;EACxB,CAAC;EACDtF,aAAa,CAACS,SAAS,CAAC2H,iBAAiB,GAAG,UAAUC,SAAS,EAAEC,QAAQ,EAAEvB,KAAK,EAAE;IAC9E,IAAIzB,aAAa,GAAG,IAAI,CAACrF,MAAM,CAACoC,YAAY,CAACqG,iBAAiB,CAACH,MAAM,CAAC,UAAUC,IAAI,EAAE;MAClF,OAAOH,SAAS,CAACzF,UAAU,IAAI4F,IAAI,CAAC5F,UAAU,IAAI4F,IAAI,CAAC5F,UAAU,IAAI0F,QAAQ,CAAC1F,UAAU;IAC5F,CAAC,CAAC;IACF,IAAI,CAAC3C,MAAM,CAACoC,YAAY,CAACS,iBAAiB,GAAGwC,aAAa;IAC1D,IAAI,CAACmD,gBAAgB,CAAC,IAAI,CAACxI,MAAM,CAACoC,YAAY,CAACqG,iBAAiB,EAAEpD,aAAa,CAAC,CAAC,CAAC,EAAEA,aAAa,CAACA,aAAa,CAACrD,MAAM,GAAG,CAAC,CAAC,EAAE8E,KAAK,CAAC;IACnI,OAAOzB,aAAa;EACxB,CAAC;EACDtF,aAAa,CAACS,SAAS,CAACgI,gBAAgB,GAAG,UAAUD,IAAI,EAAEH,SAAS,EAAEC,QAAQ,EAAEK,QAAQ,EAAE;IACtF,IAAI5B,KAAK,GAAG,CAAC;IACbyB,IAAI,CAACD,MAAM,CAAC,UAAUC,IAAI,EAAE;MACxB,IAAIH,SAAS,KAAKG,IAAI,EAAE;QACpBG,QAAQ,CAACpI,UAAU,GAAGwG,KAAK;MAC/B,CAAC,MACI,IAAIuB,QAAQ,KAAKE,IAAI,EAAE;QACxBG,QAAQ,CAAClB,QAAQ,GAAGV,KAAK,GAAGyB,IAAI,CAACI,OAAO;MAC5C;MACA7B,KAAK,IAAIyB,IAAI,CAACI,OAAO;IACzB,CAAC,CAAC;IACF,IAAIP,SAAS,KAAKC,QAAQ,EAAE;MACxBK,QAAQ,CAAClB,QAAQ,GAAGkB,QAAQ,CAACpI,UAAU,GAAG+H,QAAQ,CAACM,OAAO;IAC9D;EACJ,CAAC;EACD5I,aAAa,CAACS,SAAS,CAACqF,aAAa,GAAG,UAAUzC,OAAO,EAAEE,OAAO,EAAEE,SAAS,EAAE6B,aAAa,EAAE;IAC1F,IAAIjF,cAAc,GAAGgD,OAAO,CAACX,aAAa,CAAC,OAAO,CAAC,CAACO,QAAQ,CAAChB,MAAM;IACnE,IAAI4G,QAAQ,CAACC,aAAa,IAAID,QAAQ,CAACC,aAAa,CAACC,SAAS,CAACC,QAAQ,CAAClJ,GAAG,CAACmJ,oBAAoB,CAAC,EAAE;MAC/F,IAAI,CAACC,cAAc,GAAG,IAAI;MAC1B,IAAI,CAACjJ,MAAM,CAACmB,OAAO,CAAC+H,KAAK,EAAE;IAC/B;IACA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/I,cAAc,EAAE+I,CAAC,EAAE,EAAE;MACrC5J,MAAM,CAAC6D,OAAO,CAACX,aAAa,CAAC,UAAU,CAAC,CAAC;MACzClD,MAAM,CAAC+D,OAAO,CAACb,aAAa,CAAC,UAAU,CAAC,CAAC;MACzClD,MAAM,CAACiE,SAAS,CAACf,aAAa,CAAC,KAAK,CAAC,CAAC;IAC1C;IACA,IAAI,CAACzC,MAAM,CAACoC,YAAY,CAACS,iBAAiB,GAAGwC,aAAa;IAC1D,IAAI+D,YAAY,GAAG,IAAI,CAACpJ,MAAM,CAACoC,YAAY,CAACiH,cAAc,CAAChE,aAAa,EAAE,IAAI,CAAC;IAC/E,IAAIiE,WAAW,GAAG,IAAI,CAACtJ,MAAM,CAAC8B,UAAU,CAACuH,cAAc,EAAE;IACzD,IAAIE,SAAS,GAAG,IAAI,CAACvJ,MAAM,CAAC8B,UAAU,CAAC0H,YAAY,CAACnE,aAAa,CAACrD,MAAM,CAAC;IACzE3C,MAAM,CAAC+J,YAAY,EAAEhG,OAAO,CAACX,aAAa,CAAC,OAAO,CAAC,CAAC;IACpDpD,MAAM,CAACiK,WAAW,EAAEhG,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC,CAAC;IACnDpD,MAAM,CAACkK,SAAS,EAAE/F,SAAS,CAAC;EAChC,CAAC;EACDzD,aAAa,CAACS,SAAS,CAACoG,uBAAuB,GAAG,UAAUtD,OAAO,EAAE+B,aAAa,EAAE;IAChF,IAAI,CAACrF,MAAM,CAACoC,YAAY,CAACC,iBAAiB,GAAGgD,aAAa;IAC1D,IAAIK,WAAW,GAAG,IAAI,CAAC1F,MAAM,CAAC2F,mBAAmB,EAAE;IACnD,IAAI,CAACC,UAAU,GAAGF,WAAW,CAACA,WAAW,CAAC1D,MAAM,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC4D,UAAU;IACxE,IAAIxF,cAAc,GAAGkD,OAAO,CAACmG,gBAAgB,CAAC,UAAU,CAAC,CAACzH,MAAM;IAChE,KAAK,IAAImH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/I,cAAc,EAAE+I,CAAC,EAAE,EAAE;MACrC5J,MAAM,CAAC+D,OAAO,CAACb,aAAa,CAAC,UAAU,CAAC,CAAC;IAC7C;IACA,IAAI,IAAI,CAACzC,MAAM,CAACoE,WAAW,KAAK,OAAO,EAAE;MACrC,IAAI,IAAI,CAACpE,MAAM,CAAC2H,iBAAiB,CAACC,KAAK,CAACC,MAAM,EAAE;QAC5C,IAAI,CAAC7H,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,CAAC,CAAC,GAAGsD,aAAa;MACvD,CAAC,MACI;QACD,IAAI,CAACrF,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,IAAI,CAAC/B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,GAAGqD,aAAa;MACjG;MACA,IAAIiE,WAAW,GAAG,IAAI,CAACtJ,MAAM,CAAC8B,UAAU,CAACuH,cAAc,EAAE;MACzDhK,MAAM,CAACiK,WAAW,EAAEhG,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC,CAAC;IACvD,CAAC,MACI;MACD,IAAIiH,GAAG,GAAG,EAAE,CAAC/C,KAAK,CAACgD,IAAI,CAACrG,OAAO,CAACb,aAAa,CAAC,UAAU,CAAC,CAACO,QAAQ,CAAC;MACnE,KAAK,IAAImG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGO,GAAG,CAAC1H,MAAM,EAAEmH,CAAC,EAAE,EAAE;QACjC5J,MAAM,CAACmK,GAAG,CAACzE,QAAQ,CAACkE,CAAC,CAACrB,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;MAC3C;MACA,IAAI,CAAC9H,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAAC,IAAI,CAAC/B,MAAM,CAAC8B,UAAU,CAACC,SAAS,CAACC,MAAM,GAAG,CAAC,CAAC,GAAGqD,aAAa;MAC7F,IAAIiE,WAAW,GAAG,IAAI,CAACtJ,MAAM,CAAC8B,UAAU,CAACuH,cAAc,EAAE;MACzD,IAAIO,KAAK,GAAGtG,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC;MAC1C,IAAIoH,KAAK,GAAGvG,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC;MAC1C,IAAIqH,aAAa,GAAGxG,OAAO,CAACb,aAAa,CAAC,UAAU,CAAC;MACrD4C,aAAa,CAAC0E,OAAO,CAAC,YAAY;QAC9BD,aAAa,CAACxH,WAAW,CAAC5C,aAAa,CAAC,KAAK,CAAC,CAAC;MACnD,CAAC,CAAC;MACFmK,KAAK,CAACvH,WAAW,CAAC,IAAI,CAACtC,MAAM,CAACgK,SAAS,CAACC,kBAAkB,CAAC,EAAE,EAAE,IAAI,CAAC3J,UAAU,GAAG,CAAC,GAAG,IAAI,CAACA,UAAU,GAAG,CAAC,CAAC,CAAC;MAC1G,IAAI,IAAI,CAACN,MAAM,CAAC2H,iBAAiB,CAACuC,SAAS,CAACC,MAAM,EAAE;QAChDN,KAAK,CAACvH,WAAW,CAAC,IAAI,CAACtC,MAAM,CAACgK,SAAS,CAACC,kBAAkB,CAAC,eAAe,CAAC,CAAC;MAChF;MACAtK,OAAO,CAAC,CAACkK,KAAK,CAAC,EAAED,KAAK,CAAC;MACvBvK,MAAM,CAACiK,WAAW,EAAEhG,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC,CAAC;IACvD;EACJ,CAAC;EACD1C,aAAa,CAACS,SAAS,CAACwG,mBAAmB,GAAG,UAAU1G,UAAU,EAAEkH,QAAQ,EAAE;IAC1E,OAAO,IAAI,CAACxH,MAAM,CAACoC,YAAY,CAACC,iBAAiB,CAACsE,KAAK,CAACrG,UAAU,EAAEkH,QAAQ,CAAC;EACjF,CAAC;EACDzH,aAAa,CAACS,SAAS,CAACkD,YAAY,GAAG,UAAUN,OAAO,EAAEE,OAAO,EAAEE,SAAS,EAAEsB,aAAa,EAAE;IACzFrF,iBAAiB,CAAC2D,OAAO,CAACX,aAAa,CAAC,OAAO,CAAC,EAAE;MAAEoE,SAAS,EAAE,aAAa,GAAG,IAAI,CAAC5G,UAAU,GAAG;IAAM,CAAC,CAAC;IACzGR,iBAAiB,CAAC6D,OAAO,CAACb,aAAa,CAAC,OAAO,CAAC,EAAE;MAAEoE,SAAS,EAAE,aAAa,GAAG,IAAI,CAAC5G,UAAU,GAAG;IAAM,CAAC,CAAC;IACzGR,iBAAiB,CAAC+D,SAAS,EAAE;MAAEqD,SAAS,EAAE,aAAa,GAAG,IAAI,CAAC5G,UAAU,GAAG;IAAM,CAAC,CAAC;IACpF,IAAI,CAACT,iBAAiB,CAACsF,aAAa,CAAC,EAAE;MACnCrF,iBAAiB,CAACqF,aAAa,EAAE;QAAE+B,SAAS,EAAE,aAAa,GAAG,IAAI,CAAC5G,UAAU,GAAG;MAAM,CAAC,CAAC;IAC5F;EACJ,CAAC;EACDF,aAAa,CAACS,SAAS,CAAC4J,qBAAqB,GAAG,YAAY;IACxD,IAAI,IAAI,CAACxE,UAAU,EAAE;MACjB,IAAImC,IAAI,GAAG9C,QAAQ,CAAC,IAAI,CAACW,UAAU,CAACV,YAAY,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC;MAClE,IAAIvC,UAAU,GAAGsC,QAAQ,CAAC,IAAI,CAACW,UAAU,CAACV,YAAY,CAAC,kBAAkB,CAAC,EAAE,EAAE,CAAC;MAC/E,IAAImF,GAAG,GAAG,IAAI,CAACrK,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACiE,gBAAgB,GAAG,eAAe,GAAGiE,IAAI,GAAG,yBAAyB,GAAGpF,UAAU,GAAG,KAAK,CAAC;MACjJ,IAAI0H,GAAG,EAAE;QACL,IAAI,CAACrK,MAAM,CAACsK,gBAAgB,CAAC,CAACD,GAAG,CAAC,EAAEA,GAAG,EAAE,IAAI,CAAC;MAClD;MACA,IAAI,CAACzE,UAAU,GAAG,IAAI;IAC1B;EACJ,CAAC;EACD7F,aAAa,CAACS,SAAS,CAAC0H,gBAAgB,GAAG,UAAU7C,aAAa,EAAE;IAChE,IAAI,IAAI,CAACrF,MAAM,CAACoE,WAAW,KAAK,OAAO,EAAE;MACrC,IAAImG,SAAS,GAAGlF,aAAa,CAACmF,GAAG,CAAC,UAAUC,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC1C,IAAI;MAAE,CAAC,CAAC;MAClE,IAAI,CAAC/H,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAACkH,OAAO,CAAC,UAAUU,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACC,WAAW,GAAGH,SAAS;MAAE,CAAC,CAAC;IAC1G,CAAC,MACI;MACD,IAAII,SAAS,GAAGtF,aAAa,CAACmF,GAAG,CAAC,UAAUC,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC1C,IAAI,CAAC6C,MAAM,EAAE;MAAE,CAAC,CAAC;MAC3E,IAAIC,aAAa,GAAG,IAAI,CAAC7K,MAAM,CAAC8B,UAAU,CAAC4I,WAAW,CAACpC,MAAM,CAAC,UAAUmC,CAAC,EAAE;QAAE,OAAOE,SAAS,CAACG,OAAO,CAACL,CAAC,CAACG,MAAM,EAAE,CAAC,IAAI,CAAC;MAAE,CAAC,CAAC;MAC1H,IAAI,CAAC5K,MAAM,CAACoC,YAAY,CAACS,iBAAiB,CAACkH,OAAO,CAAC,UAAUU,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACC,WAAW,GAAGG,aAAa;MAAE,CAAC,CAAC;IAC9G;EACJ,CAAC;EACD9K,aAAa,CAACS,SAAS,CAACyD,WAAW,GAAG,YAAY;IAC9C,IAAI8G,UAAU,GAAG,IAAI,CAAC/K,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACwD,0BAA0B,CAAC;IACxF,IAAI2H,QAAQ,GAAG,EAAE,CAACrE,KAAK,CAACgD,IAAI,CAAC,IAAI,CAAC3J,MAAM,CAACmB,OAAO,CAACsI,gBAAgB,CAAC,GAAG,GAAG5J,GAAG,CAACmJ,oBAAoB,CAAC,CAAC;IAClG,IAAIgC,QAAQ,IAAID,UAAU,EAAE;MACxBC,QAAQ,CAACjB,OAAO,CAAC,UAAU5I,OAAO,EAAE;QAChC,IAAIA,OAAO,CAAC8J,qBAAqB,EAAE,CAACC,GAAG,IAAIH,UAAU,CAACE,qBAAqB,EAAE,CAACC,GAAG,EAAE;UAC/E/J,OAAO,CAACgK,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC;QACzC;MACJ,CAAC,CAAC;IACN;IACA,IAAIC,YAAY,GAAG,IAAI,CAACpL,MAAM,CAACmB,OAAO,CAACsB,aAAa,CAAC,GAAG,GAAG5C,GAAG,CAACmJ,oBAAoB,GAAG,cAAc,GAAG,CAAC,GAAG,KAAK,CAAC;IACjH,IAAI,IAAI,CAACC,cAAc,IAAImC,YAAY,EAAE;MACrCA,YAAY,CAAClC,KAAK,EAAE;MACpB,IAAI,CAACD,cAAc,GAAG,KAAK;IAC/B;EACJ,CAAC;EACDlJ,aAAa,CAACS,SAAS,CAAC6K,OAAO,GAAG,YAAY;IAC1C,IAAI,CAACxK,mBAAmB,EAAE;IAC1B,IAAI,CAAC+E,UAAU,GAAG,IAAI;EAC1B,CAAC;EACD,OAAO7F,aAAa;AACxB,CAAC,EAAG;AACJ,SAASA,aAAa"},"metadata":{},"sourceType":"module"}