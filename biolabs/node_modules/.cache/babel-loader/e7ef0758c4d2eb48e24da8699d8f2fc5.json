{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */function () {\n  function QuickPopups(parent) {\n    this.isMultipleEventSelect = false;\n    this.isCrudAction = false;\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fieldValidator = new FieldValidator();\n    this.render();\n    this.addEventListener();\n  }\n  QuickPopups.prototype.render = function () {\n    this.renderQuickPopup();\n    this.renderMorePopup();\n    this.renderQuickDialog();\n  };\n  QuickPopups.prototype.renderQuickPopup = function () {\n    var quickPopupWrapper = createElement('div', {\n      className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close'\n    });\n    if (this.parent.isAdaptive) {\n      document.body.appendChild(quickPopupWrapper);\n      addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n    } else {\n      this.parent.element.appendChild(quickPopupWrapper);\n    }\n    this.quickPopup = new Popup(quickPopupWrapper, {\n      targetType: this.parent.isAdaptive ? 'container' : 'relative',\n      enableRtl: this.parent.enableRtl,\n      open: this.quickPopupOpen.bind(this),\n      close: this.quickPopupClose.bind(this),\n      hideAnimation: this.parent.isAdaptive ? {\n        name: 'ZoomOut'\n      } : {\n        name: 'FadeOut',\n        duration: 150\n      },\n      showAnimation: this.parent.isAdaptive ? {\n        name: 'ZoomIn'\n      } : {\n        name: 'FadeIn',\n        duration: 150\n      },\n      collision: this.parent.isAdaptive ? {\n        X: 'fit',\n        Y: 'fit'\n      } : this.parent.enableRtl ? {\n        X: 'flip',\n        Y: 'fit'\n      } : {\n        X: 'none',\n        Y: 'fit'\n      },\n      position: this.parent.isAdaptive || this.parent.enableRtl ? {\n        X: 'left',\n        Y: 'top'\n      } : {\n        X: 'right',\n        Y: 'top'\n      },\n      viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n      zIndex: this.parent.isAdaptive ? 1004 : 3\n    });\n  };\n  QuickPopups.prototype.renderMorePopup = function () {\n    var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" + (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") + (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") + (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n    var moreEventWrapper = createElement('div', {\n      className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n      innerHTML: moreEventPopup\n    });\n    if (this.parent.isAdaptive) {\n      document.body.appendChild(moreEventWrapper);\n      addClass([moreEventWrapper], cls.DEVICE_CLASS);\n    } else {\n      this.parent.element.appendChild(moreEventWrapper);\n    }\n    this.morePopup = new Popup(moreEventWrapper, {\n      targetType: this.parent.isAdaptive ? 'container' : 'relative',\n      enableRtl: this.parent.enableRtl,\n      hideAnimation: {\n        name: 'ZoomOut',\n        duration: 300\n      },\n      showAnimation: {\n        name: 'ZoomIn',\n        duration: 300\n      },\n      open: this.morePopupOpen.bind(this),\n      close: this.morePopupClose.bind(this),\n      collision: this.parent.isAdaptive ? {\n        X: 'fit',\n        Y: 'fit'\n      } : this.parent.enableRtl ? {\n        X: 'flip',\n        Y: 'fit'\n      } : {\n        X: 'flip',\n        Y: 'flip'\n      },\n      viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,\n      zIndex: this.parent.isAdaptive ? 1002 : 2\n    });\n    var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n    this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n    EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n  };\n  QuickPopups.prototype.renderQuickDialog = function () {\n    var buttonModel = [{\n      buttonModel: {\n        cssClass: 'e-quick-alertok e-flat',\n        isPrimary: true\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-quick-alertcancel e-flat',\n        isPrimary: false\n      },\n      click: this.dialogButtonClick.bind(this)\n    }, {\n      buttonModel: {\n        cssClass: 'e-quick-dialog-cancel e-disable e-flat',\n        isPrimary: false\n      },\n      click: this.dialogButtonClick.bind(this)\n    }];\n    if (this.parent.eventSettings.editFollowingEvents) {\n      var followingSeriesButton = {\n        buttonModel: {\n          cssClass: 'e-quick-alertfollowing e-flat',\n          isPrimary: false\n        },\n        click: this.dialogButtonClick.bind(this)\n      };\n      buttonModel.splice(1, 0, followingSeriesButton);\n    }\n    this.quickDialog = new Dialog({\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      buttons: buttonModel,\n      cssClass: cls.QUICK_DIALOG_CLASS,\n      closeOnEscape: true,\n      enableRtl: this.parent.enableRtl,\n      beforeClose: this.beforeQuickDialogClose.bind(this),\n      isModal: true,\n      position: {\n        X: 'center',\n        Y: 'center'\n      },\n      showCloseIcon: true,\n      target: document.body,\n      visible: false,\n      width: 'auto'\n    });\n    var dialogElement = createElement('div', {\n      id: this.parent.element.id + 'QuickDialog'\n    });\n    this.parent.element.appendChild(dialogElement);\n    this.quickDialog.appendTo(dialogElement);\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (okButton) {\n      okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (cancelButton) {\n      cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n    if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n  };\n  // eslint-disable-next-line max-len\n  QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n    var buttonObj = new Button({\n      cssClass: className,\n      disabled: isDisabled,\n      enableRtl: this.parent.enableRtl,\n      iconCss: iconName\n    });\n    buttonObj.appendTo(element);\n    EventHandler.add(element, 'click', clickEvent, this);\n    removeClass([element], cls.ICON);\n  };\n  QuickPopups.prototype.quickDialogClass = function (action) {\n    var classList = [cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS, cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS];\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n    removeClass([okButton, cancelButton], classList);\n    addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n    if (this.parent.eventSettings.editFollowingEvents) {\n      addClass([followingEventButton], cls.DISABLE_CLASS);\n      removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n    }\n    switch (action) {\n      case 'Recurrence':\n        addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n        addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n          removeClass([followingEventButton], cls.DISABLE_CLASS);\n          addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n          addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n        }\n        break;\n      case 'Delete':\n        addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n        addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n        break;\n      case 'Alert':\n        addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n        addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n        break;\n    }\n  };\n  QuickPopups.prototype.applyFormValidation = function () {\n    var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n    var rules = {};\n    rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n    this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n  };\n  QuickPopups.prototype.openRecurrenceAlert = function () {\n    var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (editDeleteOnly) {\n      editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n      editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n    }\n    var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n    if (editFollowingEventsOnly) {\n      editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n      editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n    }\n    var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (editDeleteSeries) {\n      editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n      editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n    }\n    this.quickDialog.content = this.l10n.getConstant('editContent');\n    this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n    this.quickDialogClass('Recurrence');\n    var activeEvent = this.parent.activeEventData.event;\n    if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === 'EditOccurrence' && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID] !== activeEvent[this.parent.eventFields.id]) {\n      var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n      addClass([followingEventButton], cls.DISABLE_CLASS);\n    }\n    this.showQuickDialog('RecurrenceAlert');\n  };\n  QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n    this.quickDialogClass('Alert');\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    okButton.innerHTML = this.l10n.getConstant('ok');\n    okButton.setAttribute('aria-label', okButton.innerHTML);\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    cancelButton.innerHTML = this.l10n.getConstant('cancel');\n    cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    this.quickDialog.header = this.l10n.getConstant('alert');\n    var dialogCancel;\n    switch (type) {\n      case 'wrongPattern':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n        break;\n      case 'createError':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('createError');\n        break;\n      case 'sameDayAlert':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n        break;\n      case 'seriesChangeAlert':\n        dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n        removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n        okButton.innerHTML = this.l10n.getConstant('yes');\n        cancelButton.innerHTML = this.l10n.getConstant('no');\n        dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n        break;\n      case 'occurrenceAlert':\n        addClass([cancelButton], cls.DISABLE_CLASS);\n        this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n        break;\n    }\n    if (!this.parent.enableRecurrenceValidation && type === 'wrongPattern' || this.parent.enableRecurrenceValidation) {\n      this.showQuickDialog('RecurrenceValidationAlert');\n    }\n  };\n  QuickPopups.prototype.openDeleteAlert = function () {\n    if (this.parent.activeViewOptions.readonly) {\n      return;\n    }\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (okButton) {\n      okButton.innerHTML = this.l10n.getConstant('delete');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (cancelButton) {\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n    this.quickDialog.content = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n    this.quickDialog.header = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n    this.quickDialogClass('Delete');\n    this.showQuickDialog('DeleteAlert');\n  };\n  QuickPopups.prototype.openValidationError = function (type, eventData) {\n    this.quickDialog.header = this.l10n.getConstant('alert');\n    this.quickDialog.content = this.l10n.getConstant(type);\n    var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n    if (okButton) {\n      okButton.innerHTML = this.l10n.getConstant('ok');\n      okButton.setAttribute('aria-label', okButton.innerHTML);\n    }\n    var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    if (cancelButton) {\n      cancelButton.innerHTML = this.l10n.getConstant('cancel');\n      okButton.setAttribute('aria-label', cancelButton.innerHTML);\n    }\n    this.quickDialogClass('Alert');\n    this.showQuickDialog('ValidationAlert', eventData);\n  };\n  QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n    var _this = this;\n    this.quickDialog.dataBind();\n    var eventProp = {\n      type: popupType,\n      cancel: false,\n      element: this.quickDialog.element,\n      data: extend({}, eventData || this.parent.activeEventData.event, null, true)\n    };\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      if (!popupArgs.cancel) {\n        _this.quickDialog.show();\n      }\n    });\n  };\n  QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n    var _this = this;\n    var fields = this.parent.eventFields;\n    var moreEventContentEle = createElement('div', {\n      className: cls.MORE_EVENT_CONTENT_CLASS\n    });\n    var moreEventWrapperEle = createElement('div', {\n      className: cls.MORE_EVENT_WRAPPER_CLASS\n    });\n    if (eventCollection.length === 0) {\n      moreEventWrapperEle = createElement('div', {\n        className: cls.MORE_EVENT_CONTENT_CLASS,\n        innerHTML: this.l10n.getConstant('emptyContainer')\n      });\n    } else {\n      var _loop_1 = function (eventData) {\n        var eventText = eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default || this_1.parent.localeObj.getConstant('addTitle');\n        var appointmentElement = createElement('div', {\n          className: cls.APPOINTMENT_CLASS,\n          attrs: {\n            'data-id': '' + eventData[fields.id],\n            'data-guid': eventData.Guid,\n            'role': 'button',\n            'tabindex': '0',\n            'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n            'aria-label': this_1.parent.getAnnouncementString(eventData)\n          }\n        });\n        var templateElement = void 0;\n        if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n          var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n          templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false);\n          append(templateElement, appointmentElement);\n        } else {\n          appointmentElement.appendChild(createElement('div', {\n            className: cls.SUBJECT_CLASS,\n            innerHTML: eventText\n          }));\n        }\n        if (!isNullOrUndefined(groupIndex)) {\n          appointmentElement.setAttribute('data-group-index', groupIndex);\n        }\n        if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n          var iconClass = eventData[fields.id] === eventData[fields.recurrenceID] ? cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n          appointmentElement.appendChild(createElement('div', {\n            className: cls.ICON + ' ' + iconClass\n          }));\n        }\n        var args = {\n          data: extend({}, eventData, null, true),\n          element: appointmentElement,\n          cancel: false\n        };\n        this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            moreEventWrapperEle.appendChild(appointmentElement);\n            var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n            _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n            _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n          }\n        });\n      };\n      var this_1 = this;\n      for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n        var eventData = eventCollection_1[_i];\n        _loop_1(eventData);\n      }\n    }\n    moreEventContentEle.appendChild(moreEventWrapperEle);\n    return moreEventContentEle;\n  };\n  QuickPopups.prototype.tapHoldEventPopup = function (e) {\n    var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n    this.isMultipleEventSelect = false;\n    this.parent.selectedElements = [];\n    this.isMultipleEventSelect = true;\n    this.parent.eventBase.getSelectedEventElements(target);\n    this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n    var guid = target.getAttribute('data-guid');\n    var eventObj = this.parent.eventBase.getEventByGuid(guid);\n    if (isNullOrUndefined(eventObj)) {\n      return;\n    }\n    var eventTitle = eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle');\n    var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" + (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") + (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") + (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") + (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n    this.quickPopup.element.innerHTML = eventTemplate;\n    var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n    this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n    var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n    var editAction = !this.parent.eventSettings.allowEditing || readonly;\n    var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n    var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n    if (editIcon) {\n      this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n    }\n    var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n    if (deleteIcon) {\n      this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n    }\n    this.beforeQuickPopupOpen(target);\n  };\n  QuickPopups.prototype.isCellBlocked = function (args) {\n    var tempObj = {};\n    tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n      var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n      this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n    }\n    return this.parent.eventBase.isBlockRange(tempObj);\n  };\n  QuickPopups.prototype.cellClick = function (args) {\n    var date = new Date(args.startTime.getTime());\n    if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding || this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) || !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n      this.quickPopupHide();\n      return;\n    }\n    var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n    if (this.parent.isAdaptive) {\n      this.quickPopupHide();\n      var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n      if (isNullOrUndefined(newEventClone)) {\n        newEventClone = createElement('div', {\n          className: cls.NEW_EVENT_CLASS,\n          innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n        });\n      }\n      var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n      if (targetCell) {\n        targetCell.appendChild(newEventClone);\n      }\n      return;\n    }\n    var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS);\n    if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n      return;\n    }\n    var isSameTarget = this.quickPopup.relateTo === target;\n    if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n      var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n      if (subjectElement_1) {\n        subjectElement_1.focus();\n      }\n      return;\n    } else if (this.quickPopup.element) {\n      this.destroyPopupButtons('quickPopup');\n    }\n    var temp = {};\n    temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n    temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n    temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n    var quickCellPopup = createElement('div', {\n      className: cls.CELL_POPUP_CLASS\n    });\n    quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n    quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n    quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n    var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n    if (subjectElement) {\n      Input.createInput({\n        element: subjectElement,\n        properties: {\n          placeholder: this.l10n.getConstant('addTitle')\n        }\n      });\n    }\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      subjectElement.value = this.parent.eventSettings.fields.subject.default;\n    }\n    var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n    if (closeIcon) {\n      this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n    }\n    var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n    if (moreButton) {\n      this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n    }\n    var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n    if (saveButton) {\n      this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n    }\n    if (this.morePopup) {\n      this.morePopup.hide();\n    }\n    this.quickPopup.content = quickCellPopup;\n    this.quickPopup.relateTo = target;\n    this.quickPopup.dataBind();\n    this.beforeQuickPopupOpen(target);\n  };\n  QuickPopups.prototype.isSameEventClick = function (events) {\n    var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n    if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n      var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n      if (editIcon) {\n        editIcon.focus();\n      }\n      if (!this.parent.isAdaptive) {\n        var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n        if (editButton) {\n          editButton.focus();\n        }\n      }\n      return true;\n    }\n    return false;\n  };\n  QuickPopups.prototype.isQuickTemplate = function (type) {\n    return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n  };\n  QuickPopups.prototype.eventClick = function (events) {\n    if (this.parent.eventTooltip) {\n      this.parent.eventTooltip.close();\n    }\n    if (!this.parent.showQuickInfo) {\n      return;\n    }\n    if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n      this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n    } else {\n      var isSameTarget = this.isSameEventClick(events);\n      this.parent.selectedElements = [];\n      if (isSameTarget) {\n        return;\n      } else if (this.quickPopup.element) {\n        this.destroyPopupButtons('quickPopup');\n      }\n      var eventData = events.event;\n      var quickEventPopup = createElement('div', {\n        className: cls.EVENT_POPUP_CLASS\n      });\n      quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n      quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n      quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n      var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n      var editAction = !this.parent.eventSettings.allowEditing || readonly;\n      var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n      var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n      var buttonClass = 'e-flat e-round e-small';\n      if (editIcon) {\n        this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n      }\n      var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n      if (deleteIcon) {\n        this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n      }\n      var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n      if (closeIcon) {\n        this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n      }\n      var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n      if (editButton) {\n        this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n      }\n      var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n      if (deleteButton) {\n        this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n      }\n      if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n        this.morePopup.hide();\n      }\n      this.quickPopup.content = quickEventPopup;\n      this.quickPopup.relateTo = this.parent.isAdaptive ? document.body : closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n      this.quickPopup.dataBind();\n      this.beforeQuickPopupOpen(events.element);\n    }\n  };\n  QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n    var headerTemplate = createElement('div', {\n      className: cls.POPUP_HEADER_CLASS\n    });\n    if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n      var headerArgs = extend({}, headerData, {\n        elementType: headerType.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n      append([].slice.call(headerTemp), headerTemplate);\n    } else {\n      var header = void 0;\n      var args = void 0;\n      switch (headerType) {\n        case 'Cell':\n          header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" + (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n          break;\n        case 'Event':\n          args = this.getFormattedString(headerData);\n          header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" + (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") + (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") + (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") + (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") + (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\">\" + args.eventSubject + \"</div></div >\");\n          break;\n      }\n      var templateWrapper = createElement('div', {\n        innerHTML: header\n      });\n      append([].slice.call(templateWrapper.childNodes), headerTemplate);\n    }\n    return headerTemplate;\n  };\n  QuickPopups.prototype.getPopupContent = function (type, args, data) {\n    var contentTemplate = createElement('div', {\n      className: cls.POPUP_CONTENT_CLASS\n    });\n    if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n      var contentArgs = extend({}, data, {\n        elementType: type.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n      append([].slice.call(contentTemp), contentTemplate);\n    } else {\n      var content = void 0;\n      var cellDetails = void 0;\n      var argsData = void 0;\n      var resourceText = this.getResourceText(args, type.toLowerCase());\n      switch (type) {\n        case 'Cell':\n          cellDetails = this.getFormattedString(data);\n          content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" + (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") + (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") + (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") + (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") + ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" + (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") + (cls.TEXT_ELLIPSIS + \"\\\">\" + resourceText + \"</div></div>\") : '') + \"</td></tr></tbody></table>\");\n          break;\n        case 'Event':\n          argsData = this.getFormattedString(data);\n          content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' + cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n          if (data[this.parent.eventFields.recurrenceRule]) {\n            content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + this.getRecurrenceSummary(data) + '</div>';\n          }\n          content += '</div></div>';\n          if (data[this.parent.eventFields.location]) {\n            content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + data[this.parent.eventFields.location] + '</div></div>';\n          }\n          if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n            content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + this.getTimezone(data) + '</div></div>';\n          }\n          if (data[this.parent.eventFields.description]) {\n            content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + data[this.parent.eventFields.description] + '</div></div>';\n          }\n          if (this.parent.resourceCollection.length > 0) {\n            content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON + '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + resourceText + '</div></div>';\n          }\n          break;\n      }\n      var templateWrapper = createElement('div', {\n        innerHTML: content\n      });\n      append([].slice.call(templateWrapper.childNodes), contentTemplate);\n    }\n    return contentTemplate;\n  };\n  QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n    var footerTemplate = createElement('div', {\n      className: cls.POPUP_FOOTER_CLASS\n    });\n    if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n      var footerArgs = extend({}, footerData, {\n        elementType: footerType.toLowerCase()\n      }, true);\n      var templateId = this.parent.element.id;\n      var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n      append([].slice.call(footerTemp), footerTemplate);\n    } else {\n      var footer = void 0;\n      switch (footerType) {\n        case 'Cell':\n          footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" + (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") + (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") + (this.l10n.getConstant('save') + \"</button>\");\n          break;\n        case 'Event':\n          footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" + (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") + (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") + (this.l10n.getConstant('delete') + \"</button>\"));\n          break;\n      }\n      var templateWrapper = createElement('div', {\n        innerHTML: footer\n      });\n      append([].slice.call(templateWrapper.childNodes), footerTemplate);\n    }\n    return footerTemplate;\n  };\n  QuickPopups.prototype.getResourceText = function (args, type) {\n    if (this.parent.resourceCollection.length === 0) {\n      return null;\n    }\n    var resourceValue = '';\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      var resourceData = resourceCollection_1.dataSource;\n      if (type === 'event') {\n        var eventData = args.event;\n        var _loop_2 = function (data) {\n          var resourceId = eventData[resourceCollection_1.field];\n          if (resourceId instanceof Array) {\n            if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n              var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n              var resource = resourceData.filter(function (e) {\n                return e[resourceCollection_1.idField] === id_1;\n              })[0];\n              resourceValue += resourceValue === '' ? resource[resourceCollection_1.textField] : ', ' + resource[resourceCollection_1.textField];\n            }\n          } else if (data[resourceCollection_1.idField] === resourceId) {\n            resourceValue = data[resourceCollection_1.textField].toString();\n          }\n        };\n        for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n          var data = resourceData_1[_i];\n          _loop_2(data);\n        }\n      } else {\n        resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n      }\n    } else {\n      if (type === 'event') {\n        var eventData = args.event;\n        var resourceData = void 0;\n        var lastResource_1;\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n          resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n          if (!isNullOrUndefined(resourceData)) {\n            lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n            break;\n          }\n        }\n        if (!Array.isArray(resourceData)) {\n          resourceData = [resourceData];\n        }\n        var resNames_1 = [];\n        var lastResourceData_1 = lastResource_1.dataSource;\n        resourceData.forEach(function (value) {\n          var text;\n          var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n          if (i > -1) {\n            text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n          }\n          if (text) {\n            resNames_1.push(text);\n          }\n        });\n        resourceValue = resNames_1.join(', ');\n      } else {\n        var argsData = args;\n        var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n        var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n        resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n      }\n    }\n    return resourceValue;\n  };\n  QuickPopups.prototype.getFormattedString = function (eventData) {\n    var fields = this.parent.eventFields;\n    var eventSubject = eventData[fields.subject] || this.l10n.getConstant('noTitle');\n    var startDate = eventData[fields.startTime];\n    var endDate = eventData[fields.endTime];\n    var startDateDetails = this.getDateFormat(startDate, 'long');\n    var endDateDetails = eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0 ? this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') : this.getDateFormat(endDate, 'long');\n    var startTimeDetail = this.parent.getTimeString(startDate);\n    var endTimeDetail = this.parent.getTimeString(endDate);\n    var details = '';\n    var spanLength = endDate.getDate() !== startDate.getDate() && (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n    if (eventData[fields.isAllDay]) {\n      details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n      if ((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY > 1) {\n        details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n      }\n    } else if ((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY >= 1 || spanLength > 0) {\n      details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n    } else {\n      details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n    }\n    return {\n      eventSubject: eventSubject,\n      details: details\n    };\n  };\n  QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n    var _this = this;\n    this.quickPopupHide(true);\n    var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n    if (moreEventContentEle) {\n      remove(moreEventContentEle);\n    }\n    var selectedDate = data.date.getTime().toString();\n    var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n    var day = this.parent.globalize.formatDate(data.date, {\n      format: 'E',\n      calendar: this.parent.getCalendarMode()\n    });\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n    var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n    dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n    dateElement.setAttribute('data-date', selectedDate);\n    dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n    var groupOrder;\n    if (!isNullOrUndefined(groupIndex)) {\n      dateElement.setAttribute('data-group-index', groupIndex);\n      groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n    }\n    var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n    removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n    if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n      addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n    }\n    if (!this.parent.isAdaptive) {\n      if (this.parent.currentView.indexOf('Timeline') !== -1) {\n        var gIndex = target.getAttribute('data-group-index');\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n        var tdDate = startDate.getTime().toString();\n        if (isNullOrUndefined(gIndex)) {\n          this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' tbody tr td[data-date=\"' + tdDate + '\"]');\n        } else {\n          this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n          if (isNullOrUndefined(this.morePopup.relateTo)) {\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n            for (var i = 0; i < workCells.length; i++) {\n              var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n              if (date < tdDate) {\n                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n              }\n            }\n          }\n        }\n      } else {\n        this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n      }\n    }\n    this.parent.renderTemplates();\n    var eventProp = {\n      type: 'EventContainer',\n      cancel: false,\n      element: this.morePopup.element,\n      data: data\n    };\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      if (!popupArgs.cancel) {\n        _this.morePopup.show();\n      }\n    });\n  };\n  QuickPopups.prototype.saveClick = function (event) {\n    this.applyFormValidation();\n    this.dialogEvent = event;\n    this.isCrudAction = true;\n    this.quickPopupHide();\n  };\n  QuickPopups.prototype.detailsClick = function (event) {\n    var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n    if (subjectEle && subjectEle.value !== '') {\n      extend(this.parent.activeCellsData, {\n        subject: subjectEle.value\n      });\n    }\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.fieldValidator.destroyToolTip();\n    this.quickPopupHide();\n    this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n  };\n  QuickPopups.prototype.editClick = function (event) {\n    this.dialogEvent = event;\n    this.quickPopupHide(true);\n    var data = this.parent.activeEventData.event;\n    this.parent.currentAction = 'EditSeries';\n    if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n      this.parent.currentAction = 'EditOccurrence';\n      this.openRecurrenceAlert();\n    } else {\n      this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n    }\n  };\n  QuickPopups.prototype.deleteClick = function (event) {\n    this.dialogEvent = event;\n    this.quickPopupHide(true);\n    this.parent.currentAction = 'Delete';\n    if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n      this.openRecurrenceAlert();\n    } else {\n      this.openDeleteAlert();\n    }\n  };\n  QuickPopups.prototype.updateMoreEventContent = function () {\n    if (this.morePopup.element.classList.contains('e-popup-close')) {\n      return;\n    }\n    var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n    if (moreEventContentEle) {\n      remove(moreEventContentEle);\n    }\n    var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n    var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n    var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n    var groupIndex = dateElement.getAttribute('data-group-index');\n    var data;\n    var groupOrder;\n    if (!isNullOrUndefined(groupIndex)) {\n      data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n      groupOrder = data.groupOrder;\n    }\n    var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n    var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n  };\n  QuickPopups.prototype.closeClick = function (event) {\n    this.dialogEvent = event;\n    if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n      this.parent.selectCell(this.parent.activeCellsData.element);\n    }\n    this.quickPopupHide();\n    this.morePopup.hide();\n  };\n  QuickPopups.prototype.dialogButtonClick = function (event) {\n    this.dialogEvent = event;\n    this.quickDialog.hide();\n    var target = event.target;\n    var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n    var eventData = this.parent.activeEventData.event;\n    if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteOccurrence' : 'EditOccurrence';\n      switch (this.parent.currentAction) {\n        case 'EditOccurrence':\n          this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n          break;\n        case 'DeleteOccurrence':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n      switch (this.parent.currentAction) {\n        case 'EditFollowingEvents':\n          this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n          break;\n        case 'DeleteFollowingEvents':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n      this.parent.currentAction = this.parent.currentAction === 'Delete' ? 'DeleteSeries' : 'EditSeries';\n      switch (this.parent.currentAction) {\n        case 'EditSeries':\n          this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n          break;\n        case 'DeleteSeries':\n          this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n          break;\n      }\n    } else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n      this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n    } else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) || target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS))) {\n      this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n      this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n    }\n  };\n  QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n    var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n    this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n    if (selectedElements.length > 0) {\n      var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n      var titleContent = selectedElements.length === 1 ? eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle') : '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n      this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n      if (selectedElements.length > 1) {\n        addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n      }\n    } else {\n      this.parent.selectedElements = [];\n      this.quickPopupHide();\n    }\n  };\n  QuickPopups.prototype.getTimezone = function (event) {\n    var zoneDetails = '';\n    zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n    zoneDetails += zoneDetails === '' ? '' : ' - ';\n    zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n    return zoneDetails;\n  };\n  QuickPopups.prototype.getRecurrenceSummary = function (event) {\n    var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n    if (recurrenceEditor) {\n      var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n      return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n    }\n    return '';\n  };\n  QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n    return util.capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n      skeleton: skeletonString,\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n  QuickPopups.prototype.getDataFromTarget = function (target) {\n    if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n      return this.parent.activeEventData.event;\n    }\n    // Deprecated cells data in quick popups\n    var eventObj = {\n      startTime: this.parent.activeCellsData.startTime,\n      endTime: this.parent.activeCellsData.endTime,\n      isAllDay: this.parent.activeCellsData.isAllDay,\n      groupIndex: this.parent.activeCellsData.groupIndex\n    };\n    var cellsData = this.parent.activeCellsData;\n    this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n    return eventObj;\n  };\n  QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n    var _this = this;\n    var args = {\n      event: e.event || this.dialogEvent,\n      type: isNullOrUndefined(this.parent.activeEventData.event) ? 'ValidationAlert' : !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) ? 'RecurrenceAlert' : 'DeleteAlert',\n      cancel: false,\n      data: this.parent.activeEventData.event,\n      element: this.quickDialog.element\n    };\n    this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n      if (!popupCloseArgs.cancel) {\n        _this.parent.eventBase.focusElement(true);\n      }\n    });\n  };\n  QuickPopups.prototype.beforeQuickPopupOpen = function (target) {\n    var _this = this;\n    this.parent.renderTemplates();\n    var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n    var popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n    var eventProp = {\n      type: popupType,\n      cancel: false,\n      data: extend({}, this.getDataFromTarget(target), null, true),\n      target: target,\n      element: this.quickPopup.element\n    };\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      if (popupArgs.cancel) {\n        _this.quickPopupHide();\n        _this.destroyPopupButtons('quickPopup');\n        if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n          _this.quickPopupClose();\n        }\n        util.removeChildren(_this.quickPopup.element);\n        _this.isMultipleEventSelect = false;\n      } else {\n        var display = _this.quickPopup.element.style.display;\n        _this.quickPopup.element.style.display = 'block';\n        if (_this.parent.isAdaptive) {\n          _this.quickPopup.element.removeAttribute('style');\n          _this.quickPopup.element.style.display = 'block';\n          _this.quickPopup.element.style.height = formatUnit(popupType === 'EditEventInfo' ? 65 : window.innerHeight);\n        } else {\n          var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(closest(target, '.' + cls.CONTENT_TABLE_CLASS));\n          var conTable = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n          _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? util.getTranslateX(conTable) + 10 : 10;\n          _this.quickPopup.collision = {\n            X: _this.parent.enableRtl ? 'flip' : 'none',\n            Y: 'fit'\n          };\n          _this.quickPopup.position = {\n            X: _this.parent.enableRtl ? 'left' : 'right',\n            Y: _this.parent.enableRtl ? 'bottom' : 'top'\n          };\n          _this.quickPopup.dataBind();\n          _this.quickPopup.refreshPosition(null, true);\n          var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n          if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n            _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n            if (isVirtualScroll && !_this.parent.enableRtl) {\n              _this.quickPopup.offsetX = util.getTranslateX(conTable) + _this.quickPopup.offsetX;\n            }\n            _this.quickPopup.dataBind();\n            _this.quickPopup.refreshPosition(null, true);\n            var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n            if (leftCollide.indexOf('left') > -1) {\n              _this.quickPopup.position = {\n                X: 'center',\n                Y: 'center'\n              };\n              _this.quickPopup.collision = {\n                X: 'fit',\n                Y: 'fit'\n              };\n              _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n              _this.quickPopup.dataBind();\n            }\n          }\n          if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n            var translateY = util.getTranslateY(conTable);\n            _this.quickPopup.offsetY = translateY;\n            _this.quickPopup.dataBind();\n          }\n        }\n        if (isEventPopup) {\n          _this.applyEventColor();\n        }\n        _this.quickPopup.element.style.display = display;\n        _this.quickPopup.dataBind();\n        _this.quickPopup.show();\n      }\n    });\n  };\n  QuickPopups.prototype.applyEventColor = function () {\n    var colorField = '';\n    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n      colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n    } else {\n      colorField = 'background-color';\n    }\n    var color = this.parent.activeEventData.element.style[colorField];\n    if (color === '') {\n      return;\n    }\n    var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n    var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n    if (footerEle && footerEle.offsetParent) {\n      colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n      if (colorEle) {\n        colorEle.style.borderLeftColor = color;\n        color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n      }\n    }\n    if (colorEle) {\n      colorEle.style.backgroundColor = color;\n    }\n  };\n  QuickPopups.prototype.quickPopupOpen = function () {\n    if (this.parent.isAdaptive) {\n      this.quickPopup.element.style.top = '0px';\n      return;\n    }\n    if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n      var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n      if (subjectElement) {\n        subjectElement.focus();\n      }\n    } else {\n      var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n      if (editElement) {\n        editElement.focus();\n      }\n      var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n      if (editIcon) {\n        editIcon.focus();\n      }\n    }\n  };\n  QuickPopups.prototype.quickPopupClose = function () {\n    this.parent.eventBase.focusElement();\n    this.quickPopup.relateTo = cls.WORK_CELLS_CLASS;\n    this.fieldValidator.destroyToolTip();\n    if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n      this.fieldValidator.destroy();\n    }\n    this.destroyPopupButtons('quickPopup');\n    util.removeChildren(this.quickPopup.element);\n  };\n  QuickPopups.prototype.morePopupOpen = function () {\n    if (this.parent.isAdaptive) {\n      this.morePopup.element.style.top = '0px';\n      this.morePopup.element.style.left = '0px';\n      this.morePopup.element.style.height = formatUnit(window.innerHeight);\n      return;\n    }\n    this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n    this.morePopup.refreshPosition();\n  };\n  QuickPopups.prototype.morePopupClose = function () {\n    var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n    if (moreWrapper) {\n      remove(moreWrapper);\n    }\n  };\n  QuickPopups.prototype.popupClose = function (event) {\n    this.dialogEvent = event;\n    this.isCrudAction = false;\n    this.quickPopupHide(true);\n  };\n  QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n    var _this = this;\n    if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n      return;\n    }\n    var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n    var popupData;\n    if (isCellPopup) {\n      var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n      if (this.isCrudAction && formvalidator && !formvalidator.ej2_instances[0].validate()) {\n        return;\n      }\n      var fields = this.parent.eventFields;\n      var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n      this.parent.eventWindow.setDefaultValueToObject(saveObj);\n      saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n      saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n      saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n      saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.setResourceValues(saveObj);\n      }\n      popupData = saveObj;\n    } else {\n      popupData = this.parent.activeEventData.event;\n    }\n    var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n    var args = {\n      event: this.dialogEvent,\n      type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n      cancel: false,\n      data: popupData,\n      element: this.quickPopup.element,\n      target: isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n      if (!popupCloseArgs.cancel) {\n        if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n          if (isCellPopup && _this.isCrudAction) {\n            _this.parent.currentAction = 'Add';\n            _this.parent.crudModule.addEvent(popupCloseArgs.data);\n          }\n          if (hideAnimation) {\n            var animation = _this.quickPopup.hideAnimation;\n            _this.quickPopup.hideAnimation = null;\n            _this.quickPopup.hide();\n            _this.quickPopup.hideAnimation = animation;\n          } else {\n            _this.quickPopup.hide();\n          }\n          _this.isMultipleEventSelect = false;\n          _this.isCrudAction = false;\n        }\n      }\n    });\n  };\n  QuickPopups.prototype.navigationClick = function (e) {\n    var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n    if (!isNullOrUndefined(navigateEle)) {\n      var date = this.parent.getDateFromElement(e.currentTarget);\n      if (!isNullOrUndefined(date)) {\n        this.closeClick(e);\n        this.parent.setProperties({\n          selectedDate: date\n        }, true);\n        this.parent.changeView(this.parent.getNavigateView(), e);\n      }\n    }\n  };\n  QuickPopups.prototype.documentClick = function (e) {\n    var target = e.event.target;\n    var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.e-popup';\n    var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n    if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames) || !closest(target, classNames)) {\n      this.quickPopupHide();\n      this.parent.removeNewEventElement();\n    }\n    var tar = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n    if (tar && tar !== target && this.parent.allowInline) {\n      this.parent.inlineModule.documentClick();\n    }\n    if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n      this.parent.removeNewEventElement();\n    }\n    if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && target.classList && !target.classList.contains(cls.MORE_INDICATOR_CLASS) && !closest(target, '.' + cls.POPUP_OPEN) && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n      this.morePopup.hide();\n    }\n  };\n  QuickPopups.prototype.onClosePopup = function (event) {\n    if (!isNullOrUndefined(event)) {\n      this.dialogEvent = event;\n    }\n    this.quickPopupHide();\n    this.parent.eventBase.focusElement();\n  };\n  QuickPopups.prototype.addEventListener = function () {\n    this.parent.on(event.cellClick, this.cellClick, this);\n    this.parent.on(event.eventClick, this.eventClick, this);\n    this.parent.on(event.documentClick, this.documentClick, this);\n    this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n  };\n  QuickPopups.prototype.removeEventListener = function () {\n    this.parent.off(event.cellClick, this.cellClick);\n    this.parent.off(event.eventClick, this.eventClick);\n    this.parent.off(event.documentClick, this.documentClick);\n    this.parent.off(event.dataReady, this.updateMoreEventContent);\n  };\n  QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n    var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n    var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n    for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n      var button = buttonCollections_1[_i];\n      var instance = button.ej2_instances[0];\n      if (instance) {\n        instance.destroy();\n      }\n    }\n  };\n  QuickPopups.prototype.refreshQuickDialog = function () {\n    this.destroyQuickDialog();\n    this.renderQuickDialog();\n  };\n  QuickPopups.prototype.refreshQuickPopup = function () {\n    this.destroyQuickPopup();\n    this.renderQuickPopup();\n  };\n  QuickPopups.prototype.refreshMorePopup = function () {\n    this.destroyMorePopup();\n    this.renderMorePopup();\n  };\n  QuickPopups.prototype.destroyQuickDialog = function () {\n    if (this.quickDialog.element) {\n      this.quickDialog.destroy();\n      remove(this.quickDialog.element);\n      this.quickDialog = null;\n    }\n  };\n  QuickPopups.prototype.destroyQuickPopup = function () {\n    if (this.quickPopup.element) {\n      this.destroyPopupButtons('quickPopup');\n      this.quickPopup.destroy();\n      remove(this.quickPopup.element);\n      this.quickPopup = null;\n    }\n  };\n  QuickPopups.prototype.destroyMorePopup = function () {\n    if (this.morePopup.element) {\n      this.destroyPopupButtons('morePopup');\n      this.morePopup.destroy();\n      remove(this.morePopup.element);\n      this.morePopup = null;\n    }\n  };\n  QuickPopups.prototype.destroy = function () {\n    if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n      this.fieldValidator.destroy();\n    }\n    this.removeEventListener();\n    this.destroyQuickPopup();\n    this.destroyMorePopup();\n    this.destroyQuickDialog();\n    this.dialogEvent = null;\n    this.parent = null;\n    this.l10n = null;\n    this.isCrudAction = null;\n    this.fieldValidator = null;\n    this.isMultipleEventSelect = null;\n  };\n  return QuickPopups;\n}();\nexport { QuickPopups };","map":{"version":3,"names":["closest","EventHandler","isNullOrUndefined","formatUnit","append","addClass","removeClass","createElement","remove","extend","Dialog","Popup","isCollide","Button","Input","FieldValidator","event","cls","util","EVENT_FIELD","QuickPopups","parent","isMultipleEventSelect","isCrudAction","l10n","localeObj","fieldValidator","render","addEventListener","prototype","renderQuickPopup","renderMorePopup","renderQuickDialog","quickPopupWrapper","className","POPUP_WRAPPER_CLASS","isAdaptive","document","body","appendChild","DEVICE_CLASS","element","quickPopup","targetType","enableRtl","open","quickPopupOpen","bind","close","quickPopupClose","hideAnimation","name","duration","showAnimation","collision","X","Y","position","viewPortElement","zIndex","moreEventPopup","MORE_EVENT_POPUP_CLASS","MORE_EVENT_HEADER_CLASS","MORE_EVENT_CLOSE_CLASS","getConstant","MORE_EVENT_DATE_HEADER_CLASS","MORE_EVENT_HEADER_DAY_CLASS","MORE_EVENT_HEADER_DATE_CLASS","NAVIGATE_CLASS","moreEventWrapper","MORE_POPUP_WRAPPER_CLASS","innerHTML","morePopup","morePopupOpen","morePopupClose","closeButton","querySelector","renderButton","ICON","CLOSE_ICON_CLASS","closeClick","add","navigationClick","buttonModel","cssClass","isPrimary","click","dialogButtonClick","eventSettings","editFollowingEvents","followingSeriesButton","splice","quickDialog","animationSettings","effect","buttons","QUICK_DIALOG_CLASS","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","target","visible","width","dialogElement","id","appendTo","okButton","QUICK_DIALOG_ALERT_OK","setAttribute","cancelButton","QUICK_DIALOG_ALERT_CANCEL","iconName","isDisabled","clickEvent","buttonObj","disabled","iconCss","quickDialogClass","action","classList","QUICK_DIALOG_OCCURRENCE_CLASS","QUICK_DIALOG_SERIES_CLASS","QUICK_DIALOG_DELETE_CLASS","QUICK_DIALOG_CANCEL_CLASS","QUICK_DIALOG_ALERT_BTN_CLASS","DISABLE_CLASS","followingEventButton","QUICK_DIALOG_ALERT_FOLLOWING","FOLLOWING_EVENTS_DIALOG","QUICK_DIALOG_FOLLOWING_EVENTS_CLASS","applyFormValidation","form","FORM_CLASS","rules","fields","subject","validation","renderFormValidator","locale","openRecurrenceAlert","editDeleteOnly","currentAction","editFollowingEventsOnly","editDeleteSeries","content","header","activeEvent","activeEventData","eventFields","recurrenceID","showQuickDialog","openRecurrenceValidationAlert","type","dialogCancel","enableRecurrenceValidation","openDeleteAlert","activeViewOptions","readonly","length","openValidationError","eventData","popupType","_this","dataBind","eventProp","cancel","data","trigger","popupOpen","popupArgs","show","createMoreEventList","eventCollection","groupOrder","groupIndex","moreEventContentEle","MORE_EVENT_CONTENT_CLASS","moreEventWrapperEle","MORE_EVENT_WRAPPER_CLASS","_loop_1","eventText","this_1","default","appointmentElement","APPOINTMENT_CLASS","attrs","Guid","eventBase","getReadonlyAttribute","getAnnouncementString","templateElement","eventTemplate","tempId","eventTemplateName","getAppointmentTemplate","SUBJECT_CLASS","recurrenceRule","iconClass","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","args","eventRendered","eventArgs","isPreventCrud","currentView","wireAppointmentEvents","applyResourceColor","_i","eventCollection_1","tapHoldEventPopup","e","selectedElements","getSelectedEventElements","getSelectedEvents","guid","getAttribute","eventObj","getEventByGuid","eventTitle","MULTIPLE_EVENT_POPUP_CLASS","POPUP_HEADER_CLASS","CLOSE_CLASS","EDIT_CLASS","DELETE_CLASS","closeIcon","isReadonly","editAction","allowEditing","deleteAction","allowDeleting","editIcon","EDIT_ICON_CLASS","editClick","deleteIcon","DELETE_ICON_CLASS","deleteClick","beforeQuickPopupOpen","isCellBlocked","tempObj","startTime","activeCellsData","endTime","isAllDay","group","resources","targetCell","Array","parseInt","resourceBase","setResourceValues","isNaN","isBlockRange","cellClick","date","Date","getTime","showQuickInfo","allowAdding","isMinMaxDate","setHours","quickPopupHide","targetEle","newEventClone","NEW_EVENT_CLASS","WORK_CELLS_CLASS","ALLDAY_CELLS_CLASS","HEADER_CELLS_CLASS","contains","MORE_INDICATOR_CLASS","isSameTarget","relateTo","POPUP_OPEN","subjectElement_1","focus","destroyPopupButtons","temp","quickCellPopup","CELL_POPUP_CLASS","getPopupHeader","getPopupContent","getPopupFooter","subjectElement","createInput","properties","placeholder","value","popupClose","moreButton","QUICK_POPUP_EVENT_DETAILS_CLASS","detailsClick","saveButton","EVENT_CREATE_CLASS","saveClick","hide","isSameEventClick","events","editButton","EDIT_EVENT_CLASS","isQuickTemplate","quickInfoTemplates","templateType","eventClick","eventTooltip","updateTapHoldEventPopup","quickEventPopup","EVENT_POPUP_CLASS","buttonClass","deleteButton","DELETE_EVENT_CLASS","headerType","headerData","headerTemplate","headerArgs","elementType","toLowerCase","templateId","headerTemp","slice","call","getQuickInfoTemplatesHeader","POPUP_HEADER_ICON_WRAPPER","getFormattedString","SUBJECT_WRAP","TEXT_ELLIPSIS","eventSubject","replaceAll","templateWrapper","childNodes","contentTemplate","POPUP_CONTENT_CLASS","contentArgs","contentTemp","getQuickInfoTemplatesContent","cellDetails","argsData","resourceText","getResourceText","POPUP_TABLE_CLASS","DATE_TIME_CLASS","DATE_TIME_ICON_CLASS","DATE_TIME_DETAILS_CLASS","details","RESOURCE_CLASS","RESOURCE_ICON_CLASS","RESOURCE_DETAILS_CLASS","DATE_TIME_WRAPPER_CLASS","RECURRENCE_SUMMARY_CLASS","getRecurrenceSummary","location","LOCATION_CLASS","LOCATION_ICON_CLASS","LOCATION_DETAILS_CLASS","startTimezone","endTimezone","TIME_ZONE_CLASS","TIME_ZONE_ICON_CLASS","TIME_ZONE_DETAILS_CLASS","getTimezone","description","DESCRIPTION_CLASS","DESCRIPTION_ICON_CLASS","DESCRIPTION_DETAILS_CLASS","resourceCollection","footerType","footerData","footerTemplate","POPUP_FOOTER_CLASS","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","resourceCollection_1","resourceData","dataSource","_loop_2","resourceId","field","indexOf","idField","id_1","resource","filter","textField","toString","resourceData_1","lastResource_1","i","isArray","resNames_1","lastResourceData_1","forEach","text","findIndexInData","push","join","resourceDetails","lastResourceLevel","startDate","endDate","startDateDetails","getDateFormat","endDateDetails","getHours","getMinutes","addDays","startTimeDetail","getTimeString","endTimeDetail","spanLength","getDate","getUniversalTime","MS_PER_DAY","moreEventClick","selectedDate","day","globalize","formatDate","format","calendar","getCalendarMode","capitalizeFirstWord","dateElement","moreEventElements","CURRENTDATE_CLASS","resetTime","getCurrentTime","gIndex","tdDate","CONTENT_WRAP_CLASS","workCells","querySelectorAll","renderTemplates","dialogEvent","subjectEle","destroyToolTip","eventWindow","openEditor","updateMoreEventContent","filterEvents","eventsProcessed","moreElement","selectCell","cancelBtn","crudModule","deleteEvent","getParentEvent","uiStateValues","isIgnoreOccurrence","eventSave","titleContent","HIDDEN_CLASS","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","charAt","toUpperCase","skeletonString","skeleton","getDataFromTarget","cellsData","convertToEventData","popupCloseArgs","focusElement","isEventPopup","removeChildren","display","style","removeAttribute","height","window","innerHeight","isVirtualScroll","virtualScrollModule","isHorizontalScroll","CONTENT_TABLE_CLASS","conTable","offsetX","getTranslateX","refreshPosition","collide","offsetWidth","leftCollide","translateY","getTranslateY","offsetY","applyEventColor","colorField","color","colorEle","footerEle","offsetParent","borderLeftColor","match","backgroundColor","top","editElement","destroy","left","moreWrapper","isCellPopup","popupData","formvalidator","ej2_instances","validate","saveObj","getObjectFromFormData","setDefaultValueToObject","getEventMaxID","addEvent","animation","navigateEle","getDateFromElement","currentTarget","setProperties","changeView","getNavigateView","documentClick","classNames","popupWrap","childElementCount","removeNewEventElement","tar","INLINE_SUBJECT_CLASS","allowInline","inlineModule","onClosePopup","on","dataReady","removeEventListener","off","popupName","popup","buttonCollections","buttonCollections_1","button","instance","refreshQuickDialog","destroyQuickDialog","refreshQuickPopup","destroyQuickPopup","refreshMorePopup","destroyMorePopup"],"sources":["D:/xampp/htdocs/biolabs/biolabs/node_modules/@syncfusion/ej2-schedule/src/schedule/popups/quick-popups.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */ (function () {\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close' });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        var buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            var followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: cls.QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    };\n    // eslint-disable-next-line max-len\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n        removeClass([element], cls.ICON);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList = [\n            cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS,\n            cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList);\n        addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n            removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], cls.DISABLE_CLASS);\n                    addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        var activeEvent = this.parent.activeEventData.event;\n        if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === 'EditOccurrence'\n            && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID]\n            !== activeEvent[this.parent.eventFields.id]) {\n            var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n        }\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        var dialogCancel;\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n            case 'occurrenceAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert', eventData);\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n        var _this = this;\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, element: this.quickDialog.element,\n            data: extend({}, (eventData || this.parent.activeEventData.event), null, true)\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.quickDialog.show();\n            }\n        });\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: cls.MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: cls.MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: cls.MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            var _loop_1 = function (eventData) {\n                var eventText = (eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default\n                    || this_1.parent.localeObj.getConstant('addTitle'));\n                var appointmentElement = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-label': this_1.parent.getAnnouncementString(eventData)\n                    }\n                });\n                var templateElement = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: cls.SUBJECT_CLASS, innerHTML: eventText }));\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                }\n                var args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n                        _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                _loop_1(eventData);\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n        this.isMultipleEventSelect = false;\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        var editAction = !this.parent.eventSettings.allowEditing || readonly;\n        var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n        var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n        if (editIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n        }\n        var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n        if (deleteIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n        }\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    QuickPopups.prototype.cellClick = function (args) {\n        var date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: cls.NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        else if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n        }\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var quickCellPopup = createElement('div', { className: cls.CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.relateTo = target;\n        this.quickPopup.dataBind();\n        this.beforeQuickPopupOpen(target);\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.isQuickTemplate = function (type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            this.parent.selectedElements = [];\n            if (isSameTarget) {\n                return;\n            }\n            else if (this.quickPopup.element) {\n                this.destroyPopupButtons('quickPopup');\n            }\n            var eventData = events.event;\n            var quickEventPopup = createElement('div', { className: cls.EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editAction = !this.parent.eventSettings.allowEditing || readonly;\n            var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n            var buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n            this.quickPopup.dataBind();\n            this.beforeQuickPopupOpen(events.element);\n        }\n    };\n    QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n        var headerTemplate = createElement('div', { className: cls.POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            var headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            var header = void 0;\n            var args = void 0;\n            switch (headerType) {\n                case 'Cell':\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n                    break;\n                case 'Event':\n                    args = this.getFormattedString(headerData);\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\">\" + args.eventSubject + \"</div></div >\");\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: header });\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    };\n    QuickPopups.prototype.getPopupContent = function (type, args, data) {\n        var contentTemplate = createElement('div', { className: cls.POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            var contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            var content = void 0;\n            var cellDetails = void 0;\n            var argsData = void 0;\n            var resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    cellDetails = this.getFormattedString(data);\n                    content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" +\n                        (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") +\n                        (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") +\n                        (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                        ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" +\n                            (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") +\n                            (cls.TEXT_ELLIPSIS + \"\\\">\" + resourceText + \"</div></div>\") : '') + \"</td></tr></tbody></table>\");\n                    break;\n                case 'Event':\n                    argsData = this.getFormattedString(data);\n                    content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON +\n                        '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' +\n                        cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' +\n                            cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.location] + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            data[this.parent.eventFields.description] + '</div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            resourceText + '</div></div>';\n                    }\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: content });\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    };\n    QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n        var footerTemplate = createElement('div', { className: cls.POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            var footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            var footer = void 0;\n            switch (footerType) {\n                case 'Cell':\n                    footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                        (this.l10n.getConstant('save') + \"</button>\");\n                    break;\n                case 'Event':\n                    footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"));\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            if (type === 'event') {\n                var eventData = args.event;\n                var _loop_2 = function (data) {\n                    var resourceId = eventData[resourceCollection_1.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n                            var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n                            var resource = resourceData.filter(function (e) {\n                                return e[resourceCollection_1.idField] === id_1;\n                            })[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection_1.textField] :\n                                ', ' + resource[resourceCollection_1.textField];\n                        }\n                    }\n                    else if (data[resourceCollection_1.idField] === resourceId) {\n                        resourceValue = data[resourceCollection_1.textField].toString();\n                    }\n                };\n                for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n                    var data = resourceData_1[_i];\n                    _loop_2(data);\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.forEach(function (value) {\n                    var text;\n                    var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n                    }\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var startDateDetails = this.getDateFormat(startDate, 'long');\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') :\n            this.getDateFormat(endDate, 'long');\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        var _this = this;\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n        var day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                var gIndex = target.getAttribute('data-group-index');\n                var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                var tdDate = startDate.getTime().toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (var i = 0; i < workCells.length; i++) {\n                            var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates();\n        var eventProp = {\n            type: 'EventContainer', cancel: false,\n            element: this.morePopup.element, data: data\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.morePopup.show();\n            }\n        });\n    };\n    QuickPopups.prototype.saveClick = function (event) {\n        this.applyFormValidation();\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function (event) {\n        var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function (event) {\n        this.dialogEvent = event;\n        if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n            this.parent.selectCell(this.parent.activeCellsData.element);\n        }\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.dialogEvent = event;\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n        return util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Deprecated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n        var _this = this;\n        var args = {\n            event: e.event || this.dialogEvent,\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])\n                    ? 'RecurrenceAlert' : 'DeleteAlert', cancel: false, data: this.parent.activeEventData.event,\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                _this.parent.eventBase.focusElement(true);\n            }\n        });\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target) {\n        var _this = this;\n        this.parent.renderTemplates();\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var popupType = this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n        var eventProp = {\n            type: popupType, cancel: false, data: extend({}, this.getDataFromTarget(target), null, true),\n            target: target, element: this.quickPopup.element\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (popupArgs.cancel) {\n                _this.quickPopupHide();\n                _this.destroyPopupButtons('quickPopup');\n                if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n                    _this.quickPopupClose();\n                }\n                util.removeChildren(_this.quickPopup.element);\n                _this.isMultipleEventSelect = false;\n            }\n            else {\n                var display = _this.quickPopup.element.style.display;\n                _this.quickPopup.element.style.display = 'block';\n                if (_this.parent.isAdaptive) {\n                    _this.quickPopup.element.removeAttribute('style');\n                    _this.quickPopup.element.style.display = 'block';\n                    _this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                }\n                else {\n                    var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll\n                        && !isNullOrUndefined(closest(target, '.' + cls.CONTENT_TABLE_CLASS));\n                    var conTable = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                    _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? (util.getTranslateX(conTable) + 10) : 10;\n                    _this.quickPopup.collision = { X: _this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                    _this.quickPopup.position = { X: _this.parent.enableRtl ? 'left' : 'right', Y: _this.parent.enableRtl ? 'bottom' : 'top' };\n                    _this.quickPopup.dataBind();\n                    _this.quickPopup.refreshPosition(null, true);\n                    var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n                    if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n                        _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n                        if (isVirtualScroll && !_this.parent.enableRtl) {\n                            _this.quickPopup.offsetX = util.getTranslateX(conTable) + _this.quickPopup.offsetX;\n                        }\n                        _this.quickPopup.dataBind();\n                        _this.quickPopup.refreshPosition(null, true);\n                        var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n                        if (leftCollide.indexOf('left') > -1) {\n                            _this.quickPopup.position = { X: 'center', Y: 'center' };\n                            _this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                            _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                            _this.quickPopup.dataBind();\n                        }\n                    }\n                    if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                        var translateY = util.getTranslateY(conTable);\n                        _this.quickPopup.offsetY = translateY;\n                        _this.quickPopup.dataBind();\n                    }\n                }\n                if (isEventPopup) {\n                    _this.applyEventColor();\n                }\n                _this.quickPopup.element.style.display = display;\n                _this.quickPopup.dataBind();\n                _this.quickPopup.show();\n            }\n        });\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = cls.WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyPopupButtons('quickPopup');\n        util.removeChildren(this.quickPopup.element);\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.popupClose = function (event) {\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        var _this = this;\n        if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            return;\n        }\n        var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n        var popupData;\n        if (isCellPopup) {\n            var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator &&\n                !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            var fields = this.parent.eventFields;\n            var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var args = {\n            event: this.dialogEvent,\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && _this.isCrudAction) {\n                        _this.parent.currentAction = 'Add';\n                        _this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        var animation = _this.quickPopup.hideAnimation;\n                        _this.quickPopup.hideAnimation = null;\n                        _this.quickPopup.hide();\n                        _this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        _this.quickPopup.hide();\n                    }\n                    _this.isMultipleEventSelect = false;\n                    _this.isCrudAction = false;\n                }\n            }\n        });\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date)) {\n                this.closeClick(e);\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS +\n            ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.e-popup';\n        var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n        if ((popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) || !closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        var tar = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (tar && tar !== target && this.parent.allowInline) {\n            this.parent.inlineModule.documentClick();\n        }\n        if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(cls.MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + cls.POPUP_OPEN)) && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function (event) {\n        if (!isNullOrUndefined(event)) {\n            this.dialogEvent = event;\n        }\n        this.quickPopupHide();\n        this.parent.eventBase.focusElement();\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(event.cellClick, this.cellClick, this);\n        this.parent.on(event.eventClick, this.eventClick, this);\n        this.parent.on(event.documentClick, this.documentClick, this);\n        this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListener = function () {\n        this.parent.off(event.cellClick, this.cellClick);\n        this.parent.off(event.eventClick, this.eventClick);\n        this.parent.off(event.documentClick, this.documentClick);\n        this.parent.off(event.dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n        var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n        var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n        for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n            var button = buttonCollections_1[_i];\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n    };\n    QuickPopups.prototype.refreshQuickDialog = function () {\n        this.destroyQuickDialog();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.refreshQuickPopup = function () {\n        this.destroyQuickPopup();\n        this.renderQuickPopup();\n    };\n    QuickPopups.prototype.refreshMorePopup = function () {\n        this.destroyMorePopup();\n        this.renderMorePopup();\n    };\n    QuickPopups.prototype.destroyQuickDialog = function () {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog = null;\n        }\n    };\n    QuickPopups.prototype.destroyQuickPopup = function () {\n        if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup = null;\n        }\n    };\n    QuickPopups.prototype.destroyMorePopup = function () {\n        if (this.morePopup.element) {\n            this.destroyPopupButtons('morePopup');\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup = null;\n        }\n    };\n    QuickPopups.prototype.destroy = function () {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListener();\n        this.destroyQuickPopup();\n        this.destroyMorePopup();\n        this.destroyQuickDialog();\n        this.dialogEvent = null;\n        this.parent = null;\n        this.l10n = null;\n        this.isCrudAction = null;\n        this.fieldValidator = null;\n        this.isMultipleEventSelect = null;\n    };\n    return QuickPopups;\n}());\nexport { QuickPopups };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}