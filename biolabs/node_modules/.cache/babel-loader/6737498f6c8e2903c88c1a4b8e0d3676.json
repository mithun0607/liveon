{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */function () {\n  function ActionBase(parent) {\n    this.daysVariation = 0;\n    this.parent = parent;\n    this.actionObj = {\n      X: 0,\n      Y: 0,\n      groupIndex: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      slotInterval: 0,\n      interval: 0,\n      actionIndex: 0,\n      cloneElement: [],\n      originalElement: [],\n      action: null,\n      isAllDay: null,\n      excludeSelectors: null,\n      index: 0,\n      navigationInterval: null,\n      scrollInterval: null\n    };\n    this.scrollArgs = {\n      element: null,\n      width: 0,\n      height: 0\n    };\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  }\n  ActionBase.prototype.getChangedData = function (multiData) {\n    var _this = this;\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n    eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n    if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var originalElement = this.getOriginalElement(this.actionObj.element);\n      if (originalElement) {\n        var indexCol_1 = originalElement.map(function (element) {\n          return parseInt(element.getAttribute('data-group-index'), 10);\n        });\n        if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || !isNullOrUndefined(multiData) && multiData.length > 0) {\n          var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n          indexCol_1 = indexCol_1.filter(function (index) {\n            return index !== cloneIndex_1;\n          });\n          indexCol_1.push(this.actionObj.groupIndex);\n          if (multiData && multiData.length > 0) {\n            multiData.forEach(function (data) {\n              _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n            });\n          } else {\n            this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n          }\n        }\n      }\n    }\n    return eventObj;\n  };\n  ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n    if (isMultiSelect === void 0) {\n      isMultiSelect = false;\n    }\n    this.parent.activeEventData.event = this.actionObj.event;\n    this.parent.currentAction = 'Save';\n    var currentAction;\n    var eventsCollection = [eventArgs.data];\n    if (isMultiSelect) {\n      eventsCollection = eventArgs.selectedData;\n    }\n    for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n      var eventObj = eventsCollection_1[_i];\n      var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n      if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n        return;\n      }\n      if (eventObj[this.parent.eventFields.recurrenceRule]) {\n        var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n        if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n          eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n          currentAction = 'EditOccurrence';\n        }\n        if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n          return;\n        }\n      } else {\n        currentAction = null;\n      }\n      if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n        this.parent.eventBase.timezoneConvert(eventObj);\n      }\n      this.parent.crudModule.saveEvent(eventObj, currentAction);\n    }\n  };\n  ActionBase.prototype.calculateIntervalTime = function (date) {\n    var intervalTime = new Date(+date);\n    intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n    return intervalTime;\n  };\n  ActionBase.prototype.getContentAreaDimension = function () {\n    var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var trElement = [].slice.call(viewElement.querySelector('tr').children);\n    if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n      trElement = this.getResourceElements(trElement);\n    }\n    var leftOffset = trElement[0].getBoundingClientRect();\n    var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n    var viewDimension = {\n      bottom: viewElement.scrollHeight - 5,\n      left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n      right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n      top: 0,\n      leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n      rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n    };\n    return viewDimension;\n  };\n  ActionBase.prototype.getPageCoordinates = function (e) {\n    var eventArgs = e.event;\n    return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;\n  };\n  ActionBase.prototype.getIndex = function (index) {\n    var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n    var indexes = {\n      minIndex: 0,\n      maxIndex: contentElements.length - 1\n    };\n    if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n      var groupElements = this.getResourceElements(contentElements);\n      indexes.minIndex = groupElements[0].cellIndex;\n      indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n    }\n    if (index < indexes.minIndex) {\n      index = indexes.minIndex;\n    }\n    if (index > indexes.maxIndex) {\n      index = indexes.maxIndex;\n    }\n    return index;\n  };\n  ActionBase.prototype.updateTimePosition = function (date, multiData) {\n    var index = 0;\n    for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n      var cloneElement = _a[_i];\n      var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n      if (timeElement) {\n        var startTime = this.actionObj.start;\n        var endTime = this.actionObj.end;\n        if (multiData && multiData.length > 0) {\n          startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n          endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n        }\n        timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' + this.parent.getTimeString(endTime);\n      }\n      index++;\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n    if (!timeIndicator) {\n      timeIndicator = createElement('div', {\n        className: cls.CLONE_TIME_INDICATOR_CLASS\n      });\n      var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n      this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n    }\n    timeIndicator.innerHTML = this.parent.getTimeString(date);\n    var offsetValue = 0;\n    if (this.parent.activeView.isTimelineView()) {\n      if (this.parent.enableRtl) {\n        var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;\n        timeIndicator.style.right = formatUnit(offsetValue);\n      } else {\n        var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;\n        timeIndicator.style.left = formatUnit(offsetValue);\n      }\n    } else {\n      offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n      timeIndicator.style.top = formatUnit(offsetValue);\n    }\n  };\n  ActionBase.prototype.getResourceElements = function (table) {\n    var _this = this;\n    return table.filter(function (element) {\n      return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n    });\n  };\n  ActionBase.prototype.getOriginalElement = function (element) {\n    var originalElement;\n    var guid = element.getAttribute('data-guid');\n    var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n    if (isMorePopup || this.parent.activeView.isTimelineView() || this.actionObj.action !== 'resize' && this.parent.virtualScrollModule) {\n      originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n    } else {\n      var tr = closest(element, 'tr');\n      if (tr) {\n        originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n      }\n    }\n    return originalElement;\n  };\n  ActionBase.prototype.createCloneElement = function (element) {\n    var cloneWrapper = createElement('div', {\n      innerHTML: element.outerHTML\n    });\n    var cloneElement = cloneWrapper.children[0];\n    var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n    cloneClassLists.push(this.actionObj.action === 'drag' ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n    }\n    addClass([cloneElement], cloneClassLists);\n    addClass([element], cls.EVENT_ACTION_CLASS);\n    if (!isNullOrUndefined(element.parentElement)) {\n      element.parentElement.appendChild(cloneElement);\n    }\n    cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n    if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n      dragElement.appendChild(cloneElement);\n    }\n    setStyleAttribute(cloneElement, {\n      border: '0px'\n    });\n    return cloneElement;\n  };\n  ActionBase.prototype.removeCloneElementClasses = function () {\n    var elements = this.actionObj.originalElement;\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' || this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n    }\n    removeClass(elements, cls.EVENT_ACTION_CLASS);\n  };\n  ActionBase.prototype.removeCloneElement = function () {\n    this.actionObj.originalElement = [];\n    var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n    for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n      var cloneEle = dynamicEle_1[_i];\n      remove(cloneEle);\n    }\n    for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n      var cloneElement = _b[_a];\n      if (!isNullOrUndefined(cloneElement.parentNode)) {\n        remove(cloneElement);\n      }\n    }\n    this.actionObj.cloneElement = [];\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n    if (timeIndicator) {\n      remove(timeIndicator);\n    }\n  };\n  ActionBase.prototype.getCursorElement = function (e) {\n    var pages = this.getPageCoordinates(e);\n    return document.elementFromPoint(pages.clientX, pages.clientY);\n  };\n  ActionBase.prototype.autoScroll = function () {\n    var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n    var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n    var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n    var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n    if (this.actionObj.action === 'resize' && this.scrollEdges.right && parent.scrollLeft + parent.offsetWidth > parent.scrollWidth) {\n      var tdCollections = [].slice.call(this.parent.getContentTable().querySelector('tr').children).length - 1;\n      var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + this.actionObj.clone.offsetWidth) / this.actionObj.cellWidth);\n      xInBounds = cellIndex === tdCollections;\n    }\n    if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n      parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n          this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n    if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n      parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n          this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n  };\n  ActionBase.prototype.autoScrollValidation = function () {\n    if (!this.actionObj.scroll.enable) {\n      return false;\n    }\n    var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n    this.scrollEdges = res;\n    return res.bottom || res.top || res.left || res.right;\n  };\n  ActionBase.prototype.actionClass = function (type) {\n    if (type === 'addClass') {\n      addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    } else {\n      removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    }\n  };\n  ActionBase.prototype.updateScrollPosition = function (e) {\n    var _this = this;\n    this.scrollEventArgs = e;\n    if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n      this.actionObj.scrollInterval = window.setInterval(function () {\n        if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n          if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0 && _this.actionObj.groupIndex < 0) {\n            return;\n          }\n          _this.autoScroll();\n          if (_this.actionObj.action === 'drag') {\n            _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n          } else {\n            _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n          }\n        }\n      }, this.actionObj.scroll.timeDelay);\n    }\n  };\n  ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n    var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n    }\n    var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n    addClass(elements, cls.EVENT_ACTION_CLASS);\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n    removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n  };\n  ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n    var event = JSON.parse(JSON.stringify(eventObj));\n    event[this.parent.eventFields.startTime] = startTime;\n    event[this.parent.eventFields.endTime] = endTime;\n    return event;\n  };\n  ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n    if (isResize === void 0) {\n      isResize = false;\n    }\n    var appWidth = this.actionObj.cellWidth - 7;\n    if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n      appWidth = this.actionObj.cellWidth * event.count;\n    }\n    if (!isResize && this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0) {\n      var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n      if (eventObj[this.parent.eventFields.startTime].getTime() === eventObj[this.parent.eventFields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n      appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n    }\n    var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n    appointmentElement.setAttribute('drag', 'true');\n    addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n    setStyleAttribute(appointmentElement, {\n      'width': appWidth + 'px',\n      'border': '0px',\n      'pointer-events': 'none',\n      'position': 'absolute',\n      'overflow': 'hidden',\n      'padding': '3px'\n    });\n    if (this.actionObj.clone.style.backgroundColor !== '') {\n      setStyleAttribute(appointmentElement, {\n        'backgroundColor': this.actionObj.clone.style.backgroundColor\n      });\n    }\n    var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n    var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n    }\n    var cellTd = this.parent.element.querySelector(query);\n    if (isNullOrUndefined(cellTd)) {\n      return;\n    }\n    if (isResize) {\n      var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n      var appHeight = this.actionObj.cellHeight * event.count - (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n      if (this.resizeEdges.right || this.resizeEdges.left) {\n        appHeight = parseInt(this.actionObj.clone.style.height, 10);\n      }\n      setStyleAttribute(appointmentElement, {\n        'height': appHeight + 'px'\n      });\n    }\n    this.renderDynamicElement(cellTd, appointmentElement, true);\n    this.actionObj.cloneElement.push(appointmentElement);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n    if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n      cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n  ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      innerHTML: innerText\n    });\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n    return appointmentWrapper;\n  };\n  ActionBase.prototype.dynamicEventsRendering = function (event) {\n    var _this = this;\n    var dateRender = this.parent.activeView.renderDates;\n    var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    var workDays = this.parent.activeViewOptions.workDays;\n    var groupOrder;\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n      var resources = renderedResource.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      dateRender = resources[0].renderDates;\n      var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n      workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n      workDays = resources[0].workDays;\n      groupOrder = resources[0].groupOrder;\n    }\n    this.monthEvent.dateRender = dateRender;\n    this.monthEvent.getSlotDates(workDays);\n    if (this.resizeEdges.left || this.resizeEdges.right) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n        var wrapper = eventWrappers_1[_i];\n        remove(wrapper);\n      }\n    }\n    var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n    for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n      var event_1 = spannedEvents_1[_a];\n      var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n      var diffInDays = event_1.data.count;\n      var appWidth = diffInDays * this.actionObj.cellWidth - 7;\n      var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n      appointmentElement.setAttribute('drag', 'true');\n      addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n      this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n      setStyleAttribute(appointmentElement, {\n        'width': appWidth + 'px',\n        'border': '0px',\n        'pointer-events': 'none'\n      });\n      var cellTd = workCells[parseInt(day.toString(), 10)];\n      if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {\n        this.monthEvent.renderElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n      }\n    }\n  };\n  ActionBase.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.actionObj = {};\n    this.scrollArgs = {};\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  };\n  return ActionBase;\n}();\nexport { ActionBase };","map":{"version":3,"names":["addClass","createElement","extend","isNullOrUndefined","closest","setStyleAttribute","formatUnit","remove","removeClass","cls","util","ActionBase","parent","daysVariation","actionObj","X","Y","groupIndex","cellWidth","cellHeight","slotInterval","interval","actionIndex","cloneElement","originalElement","action","isAllDay","excludeSelectors","index","navigationInterval","scrollInterval","scrollArgs","element","width","height","resizeEdges","left","right","top","bottom","scrollEdges","prototype","getChangedData","multiData","_this","eventObj","event","eventFields","startTime","start","endTime","end","activeViewOptions","group","resources","length","getOriginalElement","indexCol_1","map","parseInt","getAttribute","indexOf","cloneIndex_1","clone","filter","push","forEach","data","resourceBase","getResourceData","saveChangedData","eventArgs","isMultiSelect","activeEventData","currentAction","eventsCollection","selectedData","_i","eventsCollection_1","isSameResource","recurrenceRule","eveId","recurrenceID","id","eventBase","getEventMaxID","enableRecurrenceValidation","eventWindow","editOccurrenceValidation","startTimezone","endTimezone","timezoneConvert","crudModule","saveEvent","calculateIntervalTime","date","intervalTime","Date","setMinutes","Math","floor","getMinutes","getContentAreaDimension","viewElement","querySelector","CONTENT_WRAP_CLASS","trElement","slice","call","children","activeView","isTimelineView","isAdaptive","enableAdaptiveUI","virtualScrollModule","getResourceElements","leftOffset","getBoundingClientRect","rightOffset","viewDimension","scrollHeight","enableRtl","getPageCoordinates","e","changedTouches","getIndex","contentElements","getContentTable","indexes","minIndex","maxIndex","uiStateValues","isGroupAdaptive","groupElements","cellIndex","updateTimePosition","_a","timeElement","APPOINTMENT_TIME","toString","innerHTML","getTimeString","timeScale","enable","currentView","timeIndicator","CLONE_TIME_INDICATOR_CLASS","className","wrapperClass","DATE_HEADER_WRAP_CLASS","TIME_CELLS_WRAP_CLASS","appendChild","offsetValue","rightValue","style","offsetWidth","leftValue","offsetTop","offsetHeight","table","guid","isMorePopup","offsetParent","classList","contains","MORE_EVENT_POPUP_CLASS","querySelectorAll","tr","createCloneElement","cloneWrapper","outerHTML","cloneClassLists","CLONE_ELEMENT_CLASS","DRAG_CLONE_CLASS","RESIZE_CLONE_CLASS","MONTH_CLONE_ELEMENT_CLASS","EVENT_ACTION_CLASS","parentElement","dragElement","document","eventDragArea","border","removeCloneElementClasses","elements","removeCloneElement","dynamicEle","dynamicEle_1","cloneEle","_b","parentNode","getCursorElement","pages","elementFromPoint","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","tdCollections","ceil","offsetLeft","scroll","scrollBy","autoScrollValidation","res","boundaryValidation","pageY","pageX","actionClass","type","updateScrollPosition","scrollEventArgs","window","setInterval","ALLDAY_APPOINTMENT_CLASS","dragAndDropModule","updateDraggingDateTime","resizeModule","updateResizingDirection","timeDelay","updateOriginalElement","query","concat","eventWrappers","getUpdatedEvent","JSON","parse","stringify","dynamicYearlyEventsRendering","isResize","appWidth","count","orientation","yearEvent","isSpannedEvent","getTime","isSpanned","appointmentElement","createAppointmentElement","subject","setAttribute","backgroundColor","resetTime","WORK_CELLS_CLASS","cellTd","dateHeader","DATE_HEADER_CLASS","appHeight","renderDynamicElement","isAppointment","APPOINTMENT_WRAPPER_CLASS","wrapper","resIndex","innerText","appointmentWrapper","APPOINTMENT_CLASS","dynamicEventsRendering","dateRender","renderDates","workCells","workDays","groupOrder","renderedResource","isHorizontalScroll","renderedResources","lastResourceLevel","elementSelector","monthEvent","getSlotDates","eventWrappers_1","spannedEvents","splitEvent","spannedEvents_1","event_1","day","getIndexOfDate","fields","diffInDays","applyResourceColor","renderElement","destroy","isDestroyed"],"sources":["D:/xampp/htdocs/biolabs/biolabs/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/action-base.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function (multiData) {\n        var _this = this;\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                var indexCol_1 = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n                if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol_1 = indexCol_1.filter(function (index) { return index !== cloneIndex_1; });\n                    indexCol_1.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach(function (data) {\n                            _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n        if (isMultiSelect === void 0) { isMultiSelect = false; }\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var currentAction;\n        var eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n            var eventObj = eventsCollection_1[_i];\n            var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                var eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0,\n            leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n            rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date, multiData) {\n        var index = 0;\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                var startTime = this.actionObj.start;\n                var endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n                    endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView() || (this.actionObj.action !== 'resize' && this.parent.virtualScrollModule)) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' ||\n            this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n            var cloneEle = dynamicEle_1[_i];\n            remove(cloneEle);\n        }\n        for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n            var cloneElement = _b[_a];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (this.actionObj.action === 'resize' && this.scrollEdges.right && (parent.scrollLeft + parent.offsetWidth) > parent.scrollWidth) {\n            var tdCollections = ([].slice.call(this.parent.getContentTable().querySelector('tr').children)).length - 1;\n            var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth)) /\n                this.actionObj.cellWidth);\n            xInBounds = cellIndex === tdCollections;\n        }\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function () {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        this.scrollEventArgs = e;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, cls.EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n        var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ?\n                this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n            var resources = renderedResource.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n            var event_1 = spannedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[parseInt(day.toString(), 10)];\n            if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    };\n    ActionBase.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}